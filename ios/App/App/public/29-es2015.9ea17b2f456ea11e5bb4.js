(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{KEXD:function(n,t,e){"use strict";e.r(t),e.d(t,"ListPageModule",(function(){return k}));var o=e("+J/9"),i=e("ofXK"),c=e("3Pt+"),r=e("TEn/"),a=e("iTUp"),s=e("tyNb"),d=e("mrSG"),p=e("tk/3"),g=e("nYR2"),l=e("kyzu"),m=e("5qc1"),b=e("qkCY"),u=e("fXoL"),C=e("vhDN");function _(n,t){1&n&&u.Ob(0)}const f=function(n){return{company:n}};function O(n,t){if(1&n&&(u.Sb(0,"ion-item",15),u.Ac(1,_,1,0,"ng-container",16),u.Rb()),2&n){const n=t.$implicit;u.ec(2);const e=u.rc(15);u.Bb(1),u.mc("ngTemplateOutlet",e)("ngTemplateOutletContext",u.oc(2,f,n))}}const h=function(){return["strRazonSocial","strNumeroDcto","stringObservaciones"]};function M(n,t){if(1&n&&(u.Qb(0),u.Sb(1,"cdk-virtual-scroll-viewport",12),u.Sb(2,"ion-list",13),u.Ac(3,O,2,4,"ion-item",14),u.fc(4,"filterCompanies"),u.Rb(),u.Rb(),u.Pb()),2&n){const n=u.ec();u.Bb(3),u.mc("cdkVirtualForOf",u.ic(4,1,n.companies,u.nc(5,h),n.term))}}function P(n,t){1&n&&(u.Sb(0,"div",17),u.Sb(1,"div",18),u.Nb(2,"img",19),u.Sb(3,"h3"),u.Cc(4," Recuerde sincronizar la empresas que se van actualizar aqu\xed. "),u.Rb(),u.Nb(5,"ion-icon",20),u.Rb(),u.Rb())}const v=function(n){return[n]};function S(n,t){if(1&n&&(u.Sb(0,"a",21),u.Sb(1,"ion-card",22),u.Sb(2,"ion-card-content"),u.Sb(3,"ion-item",23),u.Cc(4),u.Rb(),u.Sb(5,"ion-item",23),u.Cc(6),u.Rb(),u.Sb(7,"ion-item",24),u.Cc(8),u.Rb(),u.Rb(),u.Rb(),u.Rb()),2&n){const n=t.company;u.mc("routerLink",u.oc(5,v,n.Pk_Id_AS_004_Empresas_AMigrar)),u.Bb(4),u.Dc(n.strRazonSocial),u.Bb(2),u.Fc("",n.str_Sigla_Documento,": ",n.strNumeroDcto,""),u.Bb(2),u.Ec("Observaciones: ",n.stringObservaciones,"")}}const w=[{path:"",component:(()=>{class n{constructor(n,t,e){this.companiesService=n,this.storageService=t,this.alertService=e}ionViewWillEnter(){this.retrieveCompanies()}fetchCompanies(){return Object(d.a)(this,void 0,void 0,(function*(){const n=n=>Object(d.a)(this,void 0,void 0,(function*(){this.companies=yield this.excludeConfirmed(n)})),t=n=>{let t,e;n instanceof p.c?417===n.status?(t="Sin datos",e="Estimado usuario, no tiene empresas agendadas para actualizar."):(t="Error de conexi\xf3n",e="Ha ocurrido un error de conexi\xf3n con el servidor."):(t="Memoria llena",e="Compruebe que tiene suficiente espacio disponible en el dispositivo."),this.alertService.showAlert(t,e)},e=yield this.alertService.showLoading(),o=yield this.storageService.get("sesion");this.companiesService.fetchCompanies(o.idRegistro).pipe(Object(g.a)(()=>this.alertService.hideLoading(e))).subscribe(t=>n(t),n=>t(n))}))}retrieveCompanies(){return Object(d.a)(this,void 0,void 0,(function*(){this.companies=yield this.excludeConfirmed(yield this.companiesService.companies)}))}excludeConfirmed(n){return Object(d.a)(this,void 0,void 0,(function*(){const t=(yield this.companiesService.updatedCompanies).filter(n=>n.__confirmed);return n.filter(n=>!t.find(t=>t.Pk_Id_AS_004_Empresas_AMigrar===n.Pk_Id_AS_004_Empresas_AMigrar))}))}}return n.\u0275fac=function(t){return new(t||n)(u.Mb(m.a),u.Mb(b.a),u.Mb(l.a))},n.\u0275cmp=u.Gb({type:n,selectors:[["app-list"]],decls:16,vars:2,consts:[[1,"ion-no-border"],["size","2"],["mode","md","color","primary","defaultHref","/"],["size","10"],["animated","","color","primary","placeholder","Buscar",3,"ionChange"],[1,"ion-padding"],[4,"ngIf","ngIfElse"],["vertical","bottom","horizontal","center","slot","fixed"],[3,"click"],["name","cloud-download-outline"],["noCompaniesTmp",""],["companyTmp",""],["itemSize","150","minBufferPx","750","maxBufferPx","1500"],["lines","none",1,"companies"],["class","company ion-margin-bottom",4,"cdkVirtualFor","cdkVirtualForOf"],[1,"company","ion-margin-bottom"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"no-companies-wrapper"],[1,"message","ion-padding"],["src","../../../assets/icon/icono_observaciones.svg"],["name","arrow-down-outline"],[1,"w-100",3,"routerLink"],[1,"ion-no-margin"],["lines","none"],["lines","none",1,"observaciones"]],template:function(n,t){if(1&n&&(u.Sb(0,"ion-header",0),u.Sb(1,"ion-grid"),u.Sb(2,"ion-row"),u.Sb(3,"ion-col",1),u.Nb(4,"ion-back-button",2),u.Rb(),u.Sb(5,"ion-col",3),u.Sb(6,"ion-searchbar",4),u.ac("ionChange",(function(n){return t.term=n.detail.value})),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Sb(7,"ion-content",5),u.Ac(8,M,5,6,"ng-container",6),u.Sb(9,"ion-fab",7),u.Sb(10,"ion-fab-button",8),u.ac("click",(function(){return t.fetchCompanies()})),u.Nb(11,"ion-icon",9),u.Rb(),u.Rb(),u.Rb(),u.Ac(12,P,6,0,"ng-template",null,10,u.Bc),u.Ac(14,S,9,7,"ng-template",null,11,u.Bc)),2&n){const n=u.rc(13);u.Bb(8),u.mc("ngIf",null==t.companies?null:t.companies.length)("ngIfElse",n)}},directives:[r.w,r.v,r.L,r.p,r.e,r.f,r.M,r.jb,r.q,i.l,r.s,r.t,r.x,o.c,o.a,r.G,o.b,r.A,i.q,s.i,r.hb,r.j,r.k],pipes:[C.a],styles:["ion-header[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{position:relative}ion-header[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-back-button[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%)}ion-header[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-searchbar[_ngcontent-%COMP%]{--border-radius:1rem}ion-content[_ngcontent-%COMP%]   .companies[_ngcontent-%COMP%]{margin-bottom:100px;background-color:transparent}ion-content[_ngcontent-%COMP%]   .companies[_ngcontent-%COMP%]   .company[_ngcontent-%COMP%]{--padding-start:0;--padding-end:0;--padding-top:0;--padding-bottom:0;--inner-padding-start:0;--inner-padding-end:0;--inner-padding-bottom:0;--inner-padding-top:0;--background:transparent}ion-content[_ngcontent-%COMP%]   .companies[_ngcontent-%COMP%]   .company[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}ion-content[_ngcontent-%COMP%]   .companies[_ngcontent-%COMP%]   .company[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{--background:var(--ion-color-secondary);--color:var(--ion-color-secondary-contrast);border-radius:1rem}ion-content[_ngcontent-%COMP%]   .companies[_ngcontent-%COMP%]   .company[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start:0;--padding-end:0;--padding-top:0;--padding-bottom:0;--inner-padding-start:0;--inner-padding-end:0;--inner-padding-bottom:0;--inner-padding-top:0;--background:inherit;--color:inherit;--min-height:auto;white-space:break-spaces}ion-content[_ngcontent-%COMP%]   .companies[_ngcontent-%COMP%]   .company[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-item.observaciones[_ngcontent-%COMP%]{max-height:4.5rem}ion-content[_ngcontent-%COMP%]   .no-companies-wrapper[_ngcontent-%COMP%]{border:1px solid #344b56;border-radius:2rem;height:80%;position:relative}ion-content[_ngcontent-%COMP%]   .no-companies-wrapper[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);text-align:center}ion-content[_ngcontent-%COMP%]   .no-companies-wrapper[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:65%}ion-content[_ngcontent-%COMP%]   .no-companies-wrapper[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:700}ion-content[_ngcontent-%COMP%]   .no-companies-wrapper[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:2rem}cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{height:100%;width:100%}cdk-virtual-scroll-viewport[_ngcontent-%COMP%]  .cdk-virtual-scroll-content-wrapper{width:100%}"]}),n})()}];let y=(()=>{class n{}return n.\u0275mod=u.Kb({type:n}),n.\u0275inj=u.Jb({factory:function(t){return new(t||n)},imports:[[s.j.forChild(w)],s.j]}),n})(),k=(()=>{class n{}return n.\u0275mod=u.Kb({type:n}),n.\u0275inj=u.Jb({factory:function(t){return new(t||n)},imports:[[i.c,c.g,r.Z,y,a.a,o.e]]}),n})()},qkCY:function(n,t,e){"use strict";e.d(t,"a",(function(){return r}));var o=e("mrSG"),i=e("fXoL"),c=e("e8h1");let r=(()=>{class n{constructor(n){this.storage=n}set(n,t){return Object(o.a)(this,void 0,void 0,(function*(){let e;try{e=yield this.storage.set(n,t)}catch(o){e=!1}return!1!==e}))}get(n){return Object(o.a)(this,void 0,void 0,(function*(){let t;try{t=yield this.storage.get(n)}catch(e){}return t}))}remove(n){this.storage.remove(n)}clear(){this.storage.clear()}}return n.\u0275fac=function(t){return new(t||n)(i.Wb(c.b))},n.\u0275prov=i.Ib({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()}}]);