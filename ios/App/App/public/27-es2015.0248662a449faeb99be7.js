(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{Nom6:function(o,n,e){"use strict";e.r(n),e.d(n,"EditContactPageModule",(function(){return y}));var t=e("ofXK"),i=e("3Pt+"),r=e("TEn/"),c=e("tyNb"),a=e("mrSG"),l=e("5qc1"),s=e("i17O"),b=e("fXoL");function u(o,n){if(1&o&&(b.Sb(0,"ion-select-option",23),b.Cc(1),b.Rb()),2&o){const o=n.$implicit;b.mc("value",o),b.Bb(1),b.Ec(" ",o.label," ")}}function m(o,n){1&o&&(b.Sb(0,"p",24),b.Cc(1," Representaci\xf3n es obligatorio. "),b.Rb())}function p(o,n){if(1&o&&(b.Sb(0,"ion-select-option",23),b.Cc(1),b.Rb()),2&o){const o=n.$implicit;b.mc("value",o),b.Bb(1),b.Ec(" ",o.label," ")}}function d(o,n){1&o&&(b.Sb(0,"p",24),b.Cc(1," Tipo documento es obligatorio. "),b.Rb())}function f(o,n){1&o&&(b.Sb(0,"p",24),b.Cc(1," N\xfamero documento es obligatorio. "),b.Rb())}function g(o,n){1&o&&(b.Sb(0,"p",24),b.Cc(1," Primer nombre es obligatorio. "),b.Rb())}function C(o,n){1&o&&(b.Sb(0,"p",24),b.Cc(1," Primer apellido es obligatorio. "),b.Rb())}function S(o,n){if(1&o&&(b.Sb(0,"ion-select-option",23),b.Cc(1),b.Rb()),2&o){const o=n.$implicit;b.mc("value",o),b.Bb(1),b.Ec(" ",o.label," ")}}function h(o,n){1&o&&(b.Sb(0,"p",24),b.Cc(1," Sexo es obligatorio. "),b.Rb())}function P(o,n){1&o&&(b.Sb(0,"p",24),b.Cc(1," Email notificaci\xf3n es obligatorio. "),b.Rb())}function v(o,n){1&o&&(b.Sb(0,"p",24),b.Cc(1," Email notificaci\xf3n es inv\xe1lido. "),b.Rb())}function O(o,n){1&o&&(b.Sb(0,"p",24),b.Cc(1," Celular es obligatorio. "),b.Rb())}function R(o,n){1&o&&(b.Sb(0,"p",24),b.Cc(1," Celular es inv\xe1lido. "),b.Rb())}function N(o,n){1&o&&(b.Sb(0,"p",24),b.Cc(1," Tel\xe9fono notificaci\xf3n es obligatorio. "),b.Rb())}function _(o,n){1&o&&(b.Sb(0,"p",24),b.Cc(1," Tel\xe9fono notificaci\xf3n es inv\xe1lido. "),b.Rb())}function E(o,n){if(1&o){const o=b.Tb();b.Sb(0,"form",2),b.ac("ngSubmit",(function(){return b.tc(o),b.ec().save()})),b.Sb(1,"ion-card",3),b.Sb(2,"ion-card-content"),b.Sb(3,"ion-list",4),b.Sb(4,"ion-item",5),b.Sb(5,"ion-label",6),b.Cc(6,"Papel/Representaci\xf3n"),b.Rb(),b.Sb(7,"ion-select",7),b.Ac(8,u,2,2,"ion-select-option",8),b.Rb(),b.Ac(9,m,2,0,"p",9),b.Rb(),b.Sb(10,"ion-item",5),b.Sb(11,"ion-label",6),b.Cc(12,"Tipo Documento"),b.Rb(),b.Sb(13,"ion-select",10),b.Ac(14,p,2,2,"ion-select-option",8),b.Rb(),b.Ac(15,d,2,0,"p",9),b.Rb(),b.Sb(16,"ion-item",5),b.Sb(17,"ion-label",6),b.Cc(18,"N\xfamero Documento"),b.Rb(),b.Nb(19,"ion-input",11),b.Ac(20,f,2,0,"p",9),b.Rb(),b.Sb(21,"ion-item",5),b.Sb(22,"ion-label",6),b.Cc(23,"Primer Nombre"),b.Rb(),b.Nb(24,"ion-input",12),b.Ac(25,g,2,0,"p",9),b.Rb(),b.Sb(26,"ion-item",5),b.Sb(27,"ion-label",6),b.Cc(28,"Segundo Nombre"),b.Rb(),b.Nb(29,"ion-input",13),b.Rb(),b.Sb(30,"ion-item",5),b.Sb(31,"ion-label",6),b.Cc(32,"Primer Apellido"),b.Rb(),b.Nb(33,"ion-input",14),b.Ac(34,C,2,0,"p",9),b.Rb(),b.Sb(35,"ion-item",5),b.Sb(36,"ion-label",6),b.Cc(37,"Segundo Apellido"),b.Rb(),b.Nb(38,"ion-input",15),b.Rb(),b.Sb(39,"ion-item",5),b.Sb(40,"ion-label",6),b.Cc(41,"Sexo"),b.Rb(),b.Sb(42,"ion-select",16),b.Ac(43,S,2,2,"ion-select-option",8),b.Rb(),b.Ac(44,h,2,0,"p",9),b.Rb(),b.Sb(45,"ion-item",5),b.Sb(46,"ion-label",6),b.Cc(47,"Email Notificaci\xf3n"),b.Rb(),b.Nb(48,"ion-input",17),b.Ac(49,P,2,0,"p",9),b.Ac(50,v,2,0,"p",9),b.Rb(),b.Sb(51,"ion-item",5),b.Sb(52,"ion-label",6),b.Cc(53,"Celular"),b.Rb(),b.Nb(54,"ion-input",18),b.Ac(55,O,2,0,"p",9),b.Ac(56,R,2,0,"p",9),b.Rb(),b.Sb(57,"ion-item",5),b.Sb(58,"ion-label",6),b.Cc(59,"Tel\xe9fono Notificaci\xf3n"),b.Rb(),b.Nb(60,"ion-input",19),b.Ac(61,N,2,0,"p",9),b.Ac(62,_,2,0,"p",9),b.Rb(),b.Rb(),b.Sb(63,"div",20),b.Sb(64,"ion-button",21),b.ac("click",(function(){return b.tc(o),b.ec().cancel()})),b.Cc(65,"Cancelar"),b.Rb(),b.Sb(66,"ion-button",22),b.Cc(67,"Actualizar"),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb()}if(2&o){const o=b.ec();b.mc("formGroup",o.formGroup),b.Bb(8),b.mc("ngForOf",o.TIPOS_REPRESENTACION),b.Bb(1),b.mc("ngIf",o.formGroup.controls.representacion.hasError("required")),b.Bb(5),b.mc("ngForOf",o.TIPOS_DOCUMENTO),b.Bb(1),b.mc("ngIf",o.formGroup.controls.tipoDocumento.hasError("required")),b.Bb(5),b.mc("ngIf",o.formGroup.controls.numeroDocumento.hasError("required")),b.Bb(5),b.mc("ngIf",o.formGroup.controls.primerNombre.hasError("required")),b.Bb(9),b.mc("ngIf",o.formGroup.controls.primerApellido.hasError("required")),b.Bb(9),b.mc("ngForOf",o.TIPOS_SEXO),b.Bb(1),b.mc("ngIf",o.formGroup.controls.sexo.hasError("required")),b.Bb(5),b.mc("ngIf",o.formGroup.controls.correo.hasError("required")),b.Bb(1),b.mc("ngIf",o.formGroup.controls.correo.hasError("pattern")),b.Bb(5),b.mc("ngIf",o.formGroup.controls.celular.hasError("required")),b.Bb(1),b.mc("ngIf",o.formGroup.controls.celular.hasError("pattern")),b.Bb(5),b.mc("ngIf",o.formGroup.controls.telefono.hasError("required")),b.Bb(1),b.mc("ngIf",o.formGroup.controls.telefono.hasError("pattern"))}}const M=[{path:"",component:(()=>{class o{constructor(o,n,e,t,i){this.navbarService=o,this.route=n,this.companiesService=e,this.router=t,this.alertCtrl=i,this.EMAIL_REGEX=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/,this.TIPOS_REPRESENTACION=[{label:"Representante Legal",value:"Representante Legal"},{label:"Reponsable SG-SST",value:"Reponsable SG-SST"},{label:"COPASST",value:"COPASST"},{label:"Talento Humano",value:"Talento Humano"}],this.TIPOS_DOCUMENTO=[{label:"CC",value:"CC"},{label:"CE",value:"CE"},{label:"PA",value:"PA"},{label:"PE",value:"PE"},{label:"PT",value:"PT"}],this.TIPOS_SEXO=[{label:"Masculino",value:"Masculino"},{label:"Femenino",value:"Femenino"}]}ionViewWillEnter(){this.navbarService.setVisibility(!1),this.formGroup=void 0,this.getCompany()}ionViewWillLeave(){this.navbarService.setVisibility(!0)}save(){var o,n;return Object(a.a)(this,void 0,void 0,(function*(){if(this.formGroup.invalid){const o=yield this.alertCtrl.create({header:"Atenci\xf3n",mode:"ios",message:"Compruebe el correcto diligenciamiento de TODOS los campos obligatorios.",buttons:["ACEPTAR"]});return void(yield o.present())}const e=this.formGroup.value,t={strPapelRespresentacion:e.representacion.value,strSiglaTipoDoc:e.tipoDocumento.label,strNumeroDocumento:e.numeroDocumento,strPrimerNombre:e.primerNombre,strSegundoNombre:e.segundoNombre,strPrimerApellido:e.primerApellido,strSegundoApellido:e.segundoApellido,strSexo:e.sexo.value,strCelular:e.celular,strTelefono:e.telefono,strEmail:e.correo,intTipoDocumento:e.tipoDocumento.value},i=null!==(o=this.company.listaPersonasContacto)&&void 0!==o?o:[],r=i.findIndex(o=>o.strNumeroDocumento===t.strNumeroDocumento);r>-1?i[r]=t:i.push(t),this.company.listaPersonasContacto=i;const c=null!==(n=this.company.__updated)&&void 0!==n?n:[];c.find(o=>"contact-data"===o)||(c.push("contact-data"),this.company.__updated=c),this.cancel()}))}cancel(){this.router.navigate([`/u/companies/list/${this.route.snapshot.params.id}/contact-list`],{replaceUrl:!0})}getCompany(){return Object(a.a)(this,void 0,void 0,(function*(){const o=+this.route.snapshot.params.id;try{this.company=yield this.companiesService.prepareCompany(o)}catch(n){this.company=this.companiesService.company}this.company?this.initForm():this.cancel()}))}initForm(){const o=this.getCurrentContact(),n=this.TIPOS_REPRESENTACION.find(n=>n.value===o.strPapelRespresentacion),e=new i.c(n,[i.q.required]),t=this.TIPOS_DOCUMENTO.find(n=>n.value===o.intTipoDocumento),r=new i.c(t,[i.q.required]),c=new i.c(o.strNumeroDocumento,[i.q.required]),a=new i.c(o.strPrimerNombre,[i.q.required]),l=new i.c(o.strSegundoNombre),s=new i.c(o.strPrimerApellido,[i.q.required]),b=new i.c(o.strSegundoApellido),u=this.TIPOS_SEXO.find(n=>n.value===o.strSexo),m=new i.c(u,[i.q.required]),p=new i.c(o.strEmail,[i.q.required,i.q.pattern(this.EMAIL_REGEX)]),d=new i.c(o.strCelular,[i.q.required,i.q.pattern(/^3\d{9}$/)]),f=new i.c(o.strTelefono,[i.q.required,i.q.pattern(/^\d{7,10}$/)]);this.formGroup=new i.e({representacion:e,tipoDocumento:r,numeroDocumento:c,primerNombre:a,segundoNombre:l,primerApellido:s,segundoApellido:b,sexo:m,correo:p,celular:d,telefono:f})}getCurrentContact(){var o;const n=this.route.snapshot.queryParams.id;return n&&(null!==(o=this.company.listaPersonasContacto)&&void 0!==o?o:[]).find(o=>o.strNumeroDocumento===n)||{}}}return o.\u0275fac=function(n){return new(n||o)(b.Mb(s.a),b.Mb(c.a),b.Mb(l.a),b.Mb(c.g),b.Mb(r.a))},o.\u0275cmp=b.Gb({type:o,selectors:[["app-edit-contact"]],decls:6,vars:1,consts:[[1,"title"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"ion-margin"],["lines","none"],[1,"ion-margin-bottom"],["position","stacked"],["mode","ios","interface","action-sheet","cancelText","CANCELAR","formControlName","representacion"],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["mode","ios","interface","action-sheet","cancelText","CANCELAR","formControlName","tipoDocumento"],["formControlName","numeroDocumento"],["formControlName","primerNombre"],["formControlName","segundoNombre"],["formControlName","primerApellido"],["formControlName","segundoApellido"],["mode","ios","interface","action-sheet","cancelText","CANCELAR","formControlName","sexo"],["type","email","formControlName","correo"],["type","tel","formControlName","celular"],["type","tel","formControlName","telefono"],[1,"actions-wrapper","ion-margin-top"],["color","light",3,"click"],["type","submit","color","primary"],[3,"value"],[1,"invalid-feedback"]],template:function(o,n){1&o&&(b.Sb(0,"ion-header"),b.Sb(1,"ion-toolbar"),b.Sb(2,"div",0),b.Cc(3,"Actualizaci\xf3n Persona Contacto Empresa"),b.Rb(),b.Rb(),b.Rb(),b.Sb(4,"ion-content"),b.Ac(5,E,68,16,"form",1),b.Rb()),2&o&&(b.Bb(5),b.mc("ngIf",n.formGroup))},directives:[r.w,r.Y,r.q,t.l,i.r,i.m,i.f,r.j,r.k,r.G,r.A,r.F,r.N,r.ib,i.l,i.d,t.k,r.z,r.jb,r.h,r.O],styles:["ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{padding:10px;--background:var(--ion-color-medium);--color:var(--ion-color-medium-contrast)}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{text-overflow:clip;white-space:break-spaces;text-align:center;font-size:1.3rem}ion-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{padding:0;background-color:transparent}ion-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start:0;--inner-padding-end:0;--background:inherit;--highlight-height:0;--background:transparent}ion-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{opacity:1;transform:translateY(0) scale(1);white-space:break-spaces}ion-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]     .native-input{opacity:1}ion-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{border-radius:5px;border:1px solid var(--ion-color-dark);--padding-start:1rem;--padding-end:1rem;background-color:var(--ion-color-light);color:var(--ion-color-light-contrast)}ion-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .invalid-feedback[_ngcontent-%COMP%]{color:var(--ion-color-danger);margin-top:.5rem}ion-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .actions-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-around}"]}),o})()}];let A=(()=>{class o{}return o.\u0275mod=b.Kb({type:o}),o.\u0275inj=b.Jb({factory:function(n){return new(n||o)},imports:[[c.j.forChild(M)],c.j]}),o})(),y=(()=>{class o{}return o.\u0275mod=b.Kb({type:o}),o.\u0275inj=b.Jb({factory:function(n){return new(n||o)},imports:[[t.c,i.g,r.Z,i.p,A]]}),o})()},qkCY:function(o,n,e){"use strict";e.d(n,"a",(function(){return c}));var t=e("mrSG"),i=e("fXoL"),r=e("e8h1");let c=(()=>{class o{constructor(o){this.storage=o}set(o,n){return Object(t.a)(this,void 0,void 0,(function*(){let e;try{e=yield this.storage.set(o,n)}catch(t){e=!1}return!1!==e}))}get(o){return Object(t.a)(this,void 0,void 0,(function*(){let n;try{n=yield this.storage.get(o)}catch(e){}return n}))}remove(o){this.storage.remove(o)}clear(){this.storage.clear()}}return o.\u0275fac=function(n){return new(n||o)(i.Wb(r.b))},o.\u0275prov=i.Ib({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()}}]);