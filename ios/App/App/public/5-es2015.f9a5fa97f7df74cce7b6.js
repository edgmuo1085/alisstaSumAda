(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{f79S:function(n,o,t){"use strict";t.r(o),t.d(o,"MY_FORMATS",(function(){return M})),t.d(o,"ListCommunicationsPageModule",(function(){return O}));var i=t("ofXK"),e=t("3Pt+"),c=t("TEn/"),a=t("tyNb"),r=t("mrSG"),s=t("KX+i"),b=t("fXoL"),l=t("e8h1"),m=t("IRfi"),g=t("A2Vd"),u=t("/o1g");function d(n,o){if(1&n&&(b.Sb(0,"ion-select-option",29),b.Cc(1),b.Rb()),2&n){const n=o.$implicit;b.mc("value",n.Valor),b.Bb(1),b.Dc(n.Nombre)}}function C(n,o){if(1&n){const n=b.Tb();b.Sb(0,"ion-card",30),b.ac("click",(function(){b.tc(n);const t=o.$implicit;return b.ec().selectTalk(t)})),b.Sb(1,"ion-item",11),b.Nb(2,"ion-icon",31),b.Sb(3,"ion-grid"),b.Sb(4,"ion-row"),b.Sb(5,"ion-col",6),b.Sb(6,"p",32),b.Cc(7),b.Rb(),b.Rb(),b.Rb(),b.Sb(8,"ion-row"),b.Sb(9,"ion-col",6),b.Sb(10,"p"),b.Cc(11),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Sb(12,"ion-item",11),b.Sb(13,"ion-grid"),b.Sb(14,"ion-row"),b.Sb(15,"ion-col",33),b.Sb(16,"strong"),b.Cc(17,"Tema:"),b.Rb(),b.Rb(),b.Sb(18,"ion-col",34),b.Sb(19,"p",35),b.Cc(20),b.Rb(),b.Rb(),b.Rb(),b.Sb(21,"ion-row"),b.Sb(22,"ion-col",34),b.Sb(23,"strong",36),b.Cc(24,"Caracterizaci\xf3n PyP:"),b.Rb(),b.Rb(),b.Sb(25,"ion-col",33),b.Sb(26,"p"),b.Cc(27,"Regulares"),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb()}if(2&n){const n=o.$implicit;b.Bb(7),b.Dc(n.Empresa),b.Bb(4),b.Fc("",n.EmpresaTipoDocumento," ",n.EmpresaDocumento,""),b.Bb(9),b.Dc(n.Tema)}}const p=[{path:"",component:(()=>{class n{constructor(n,o,t,i,e){this.router=n,this.formBuilder=o,this.storage=t,this.talkService=i,this.route=e,this.minDate=new Date,this.customActionSheetOptions={header:"Temas de conversaci\xedn",subHeader:"Seleccione el tema de conversaci\xf3n"},this.rolesVisualizarHistoricos=[]}ngOnInit(){return Object(r.a)(this,void 0,void 0,(function*(){this.createFormConsultComunication(),this.infoUser=yield this.storage.get("sesion"),this.getTemasComunicacion()}))}ionViewDidEnter(){this.getListTalks()}ionViewDidLeave(){this.paramsSubscription.unsubscribe()}ngOnDestroy(){}createFormConsultComunication(){this.formConsultComunicaciones=this.formBuilder.group({razonSocial:[""],temaComunicacion:[""],fechaInicial:[""],fechaFinal:[""]})}getTemasComunicacion(){this.talkService.getTemasComunicacion().subscribe(n=>{this.temasComunicacion=n.temas,this.talkService.saveRolesHistoricos(n.RolVisHis)})}selectedTopic(n){this.temaSeleccionado="",this.temaSeleccionado=n.detail.value}buscarComunicacion(){const n=this.formConsultComunicaciones.value;let o,t,i;if(o=""===n.temaComunicacion?"-1":n.temaComunicacion,""===n.fechaInicial)t="";else{const o=n.fechaInicial._d.toISOString().split("T")[0].split("-");t=o[2].concat("/").concat(o[1]).concat("/").concat(o[0])}if(""===n.fechaFinal)i="";else{const o=n.fechaFinal._d.toISOString().split("T")[0].split("-");i=o[2].concat("/").concat(o[1]).concat("/").concat(o[0])}this.talkService.searchComunicacion(n.razonSocial,o,t,i,this.infoUser.idRegistro,this.infoUser.idRol).subscribe(n=>{!0===n.IsOk&&(this.talks=n.Respuesta)})}getListTalks(){const n=this.formConsultComunicaciones.value;let o;o=""===n.temaComunicacion?"-1":n.temaComunicacion,this.talkService.searchComunicacion(n.razonSocial,o,"","",this.infoUser.idRegistro,this.infoUser.idRol).subscribe(n=>{!0===n.IsOk&&(this.talks=n.Respuesta,this.paramsSubscription=this.route.params.subscribe(n=>{let o=n.communicationId;if(o){let n=+o,t=this.talks.find(o=>o.PKConversacion==n);this.selectTalk(t)}}))})}dateToString(n){return n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear()}selectTalk(n){this.talkService.saveSelectedCoversation(n),this.router.navigateByUrl("u/talk/"+n.PKConversacion)}cleanFields(){this.formConsultComunicaciones.reset()}}return n.\u0275fac=function(o){return new(o||n)(b.Mb(a.g),b.Mb(e.b),b.Mb(l.b),b.Mb(s.a),b.Mb(a.a))},n.\u0275cmp=b.Gb({type:n,selectors:[["app-list-communications"]],decls:66,vars:10,consts:[["size","2"],["color","tertiary"],["slot","start"],["color","primary","mode","md","defaultHref","/"],["size","10"],[1,"titulo"],["size","12"],["lines","none","color","secondary"],["src","../../../../assets/icon/icono_comunicaciones.svg","alt","iconItem",1,"imgMenu"],[1,"ion-text-center"],[3,"formGroup"],["lines","none"],["position","stacked"],["formControlName","razonSocial","placeholder","Raz\xf3n social o nit",1,"bg-light","mt-3","rounded","pl-1","pr-1"],["cancelText","CANCELAR","formControlName","temaComunicacion","mode","ios","interface","action-sheet","placeholder","Seleccione un tema",1,"bg-light","mt-3","rounded","pl-1","pr-1",3,"interfaceOptions","ionChange"],["value","-1"],[3,"value",4,"ngFor","ngForOf"],[2,"margin","0px","width","100%"],["size","6"],[1,"bg-light","mt-3","rounded","pl-1","pr-1",2,"width","100%"],["readonly","","matInput","","formControlName","fechaInicial",3,"matDatepicker","max"],["matSuffix","",3,"for"],["picker",""],["readonly","","matInput","","formControlName","fechaFinal",3,"matDatepicker","max"],["picker1",""],["size","1"],["size","5"],["color","primary","expand","block",3,"click"],["mode","ios",3,"click",4,"ngFor","ngForOf"],[3,"value"],["mode","ios",3,"click"],["name","enter-outline","slot","end",2,"color","orange","width","2rem","height","2rem"],[2,"font-size","0.8rem"],["size","4"],["size","8"],[2,"color","red","font-weight","400"],[2,"font-size","0.9rem"]],template:function(n,o){if(1&n&&(b.Sb(0,"ion-header"),b.Sb(1,"ion-grid"),b.Sb(2,"ion-row"),b.Sb(3,"ion-col",0),b.Sb(4,"ion-toolbar",1),b.Sb(5,"ion-buttons",2),b.Nb(6,"ion-back-button",3),b.Rb(),b.Rb(),b.Rb(),b.Sb(7,"ion-col",4),b.Sb(8,"ion-title",5),b.Cc(9,"Lista de comunicaciones"),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Sb(10,"ion-content"),b.Sb(11,"ion-grid"),b.Sb(12,"ion-row"),b.Sb(13,"ion-col",6),b.Sb(14,"ion-list"),b.Sb(15,"ion-item",7),b.Sb(16,"ion-avatar",2),b.Nb(17,"img",8),b.Rb(),b.Sb(18,"div",9),b.Sb(19,"ion-label"),b.Cc(20,"Comunicaci\xf3n"),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Sb(21,"ion-card"),b.Sb(22,"form"),b.Sb(23,"ion-list",10),b.Sb(24,"ion-item",11),b.Sb(25,"ion-label",12),b.Cc(26,"Raz\xf3n social o Nit"),b.Rb(),b.Nb(27,"ion-input",13),b.Rb(),b.Sb(28,"ion-item",11),b.Sb(29,"ion-label",12),b.Cc(30,"Tema"),b.Rb(),b.Sb(31,"ion-select",14),b.ac("ionChange",(function(n){return o.selectedTopic(n)})),b.Sb(32,"ion-select-option",15),b.Cc(33,"Seleccione un tema"),b.Rb(),b.Ac(34,d,2,2,"ion-select-option",16),b.Rb(),b.Rb(),b.Sb(35,"ion-item",11),b.Sb(36,"ion-grid",17),b.Sb(37,"ion-row"),b.Sb(38,"ion-col",18),b.Sb(39,"ion-label",12),b.Cc(40,"Fecha Inicio"),b.Rb(),b.Sb(41,"mat-form-field",19),b.Nb(42,"input",20),b.Nb(43,"mat-datepicker-toggle",21),b.Nb(44,"mat-datepicker",null,22),b.Rb(),b.Rb(),b.Sb(46,"ion-col",18),b.Sb(47,"ion-label",12),b.Cc(48,"Fecha Fin"),b.Rb(),b.Sb(49,"mat-form-field",19),b.Nb(50,"input",23),b.Nb(51,"mat-datepicker-toggle",21),b.Nb(52,"mat-datepicker",null,24),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Sb(54,"ion-item",11),b.Sb(55,"ion-grid"),b.Sb(56,"ion-row"),b.Nb(57,"ion-col",25),b.Sb(58,"ion-col",26),b.Sb(59,"ion-button",27),b.ac("click",(function(){return o.buscarComunicacion()})),b.Cc(60,"Consultar"),b.Rb(),b.Rb(),b.Sb(61,"ion-col",26),b.Sb(62,"ion-button",27),b.ac("click",(function(){return o.cleanFields()})),b.Cc(63,"Limpiar"),b.Rb(),b.Rb(),b.Nb(64,"ion-col",25),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Ac(65,C,28,4,"ion-card",28),b.Rb()),2&n){const n=b.rc(45),t=b.rc(53);b.Bb(23),b.mc("formGroup",o.formConsultComunicaciones),b.Bb(8),b.mc("interfaceOptions",o.customActionSheetOptions),b.Bb(3),b.mc("ngForOf",o.temasComunicacion),b.Bb(8),b.mc("matDatepicker",n)("max",o.minDate),b.Bb(1),b.mc("for",n),b.Bb(7),b.mc("matDatepicker",t)("max",o.minDate),b.Bb(1),b.mc("for",t),b.Bb(14),b.mc("ngForOf",o.talks)}},directives:[c.w,c.v,c.L,c.p,c.Y,c.i,c.e,c.f,c.W,c.q,c.G,c.A,c.d,c.F,c.j,e.r,e.m,e.n,e.f,c.z,c.jb,e.l,e.d,c.N,c.ib,c.O,i.k,m.a,g.b,e.a,u.b,u.d,m.d,u.a,c.h,c.x],styles:["ion-header[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{color:#fff}ion-header[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:0;background:#95a6b1}ion-header[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{width:100%}ion-header[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{padding:0}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{background:none;height:80px}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-bottom:40px;border-radius:15px;font-size:16.4px;font-weight:700;--min-height:70px}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .tituloOpcion[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}ion-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{margin-bottom:30px}ion-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:0}ion-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}ion-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius:50px}.titulo[_ngcontent-%COMP%]{font-size:20px!important;text-align:left;padding:10px 0 0;margin-top:10px}.imgMenu[_ngcontent-%COMP%], .titulo[_ngcontent-%COMP%]{width:100%!important}.imgMenu[_ngcontent-%COMP%]{height:145%!important;transform:translateY(-8px)}"]}),n})()}];let S=(()=>{class n{}return n.\u0275mod=b.Kb({type:n}),n.\u0275inj=b.Jb({factory:function(o){return new(o||n)},imports:[[a.j.forChild(p)],a.j]}),n})();var h=t("j14s"),f=t("1yaQ");const M={parse:{dateInput:"LL"},display:{dateInput:"LL",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}};let O=(()=>{class n{}return n.\u0275mod=b.Kb({type:n}),n.\u0275inj=b.Jb({factory:function(o){return new(o||n)},providers:[{provide:h.d,useValue:"es-ES"},{provide:h.a,useClass:f.b,deps:[h.d,f.a]},{provide:h.c,useValue:M}],imports:[[i.c,e.g,e.p,c.Z,u.c,m.c,h.g,g.c,S]]}),n})()}}]);