(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{qhKe:function(t,e,n){"use strict";n.r(e),n.d(e,"MY_FORMATS",(function(){return F})),n.d(e,"CommentsPageModule",(function(){return w}));var o=n("ofXK"),i=n("3Pt+"),c=n("TEn/"),s=n("tyNb"),r=n("mrSG"),a=n("AC/E"),m=n("fXoL");let l=(()=>{class t{constructor(t,e,n){this.formBuilder=t,this.router=e,this.cacheService=n,this.infoCommentSuccess=new m.n,this.contador=0}ngOnInit(){this.createFormSuccessComments();const t=this.cacheService.getSaveCommentsAdvice();0!==Object.keys(t).length&&this.formSuccessComments.patchValue({descriptionSuccess:t.comment})}createFormSuccessComments(){this.formSuccessComments=this.formBuilder.group({descriptionSuccess:["",i.q.required]}),this.formSuccessComments.controls.descriptionSuccess.valueChanges.subscribe(t=>{this.contador=(t||"").length})}next(){this.formSuccessComments.valid&&this.infoCommentSuccess.emit({type:this.typeMenu,typeSelected:!0,comment:this.formSuccessComments.controls.descriptionSuccess.value,redireccionar:!0})}}return t.\u0275fac=function(e){return new(e||t)(m.Mb(i.b),m.Mb(s.g),m.Mb(a.a))},t.\u0275cmp=m.Gb({type:t,selectors:[["app-success"]],inputs:{typeMenu:"typeMenu"},outputs:{infoCommentSuccess:"infoCommentSuccess"},decls:12,vars:2,consts:[["lines","none"],[3,"formGroup"],[1,"p-0"],["position","stacked"],["type","text","maxlength","2000","placeholder","Observaciones y/o recomendaciones...","formControlName","descriptionSuccess","rows","5",1,"bg-light","mt-3","pl-1"],[1,"ion-text-center","mt-5"],["color","primary",3,"click"]],template:function(t,e){1&t&&(m.Sb(0,"ion-content"),m.Sb(1,"ion-list",0),m.Sb(2,"form",1),m.Sb(3,"ion-item",2),m.Sb(4,"ion-label",3),m.Cc(5,"Observaciones y recomendaciones"),m.Rb(),m.Nb(6,"ion-textarea",4),m.Rb(),m.Rb(),m.Sb(7,"span"),m.Cc(8),m.Rb(),m.Sb(9,"div",5),m.Sb(10,"ion-button",6),m.ac("click",(function(){return e.next()})),m.Cc(11,"Continuar"),m.Rb(),m.Rb(),m.Rb(),m.Rb()),2&t&&(m.Bb(2),m.mc("formGroup",e.formSuccessComments),m.Bb(6),m.Ec("",e.contador,"/2000"))},directives:[c.q,c.G,i.r,i.m,i.f,c.A,c.F,c.U,c.jb,i.h,i.l,i.d,c.h],styles:["ion-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{background:none}ion-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background:none}ion-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{border-radius:10px}ion-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius:50px}.label-stacked.sc-ion-label-md-h[_ngcontent-%COMP%]{transform:none}ion-list[_ngcontent-%COMP%]{padding-left:var(--ion-padding,16px);padding-right:var(--ion-padding,16px)}"]}),t})();var d=n("IRfi"),u=n("A2Vd"),b=n("/o1g");function p(t,e){if(1&t&&(m.Sb(0,"ion-select-option",13),m.Cc(1),m.Rb()),2&t){const t=e.$implicit;m.mc("value",t.valor),m.Bb(1),m.Dc(t.valor)}}function h(t,e){if(1&t&&(m.Sb(0,"ion-item",8),m.Sb(1,"ion-label",3),m.Cc(2,"Nueva fecha de la actividad"),m.Rb(),m.Sb(3,"mat-form-field",14),m.Nb(4,"input",15),m.Nb(5,"mat-datepicker-toggle",16),m.Nb(6,"mat-datepicker",null,17),m.Rb(),m.Rb()),2&t){const t=m.rc(7),e=m.ec();m.Bb(4),m.mc("matDatepicker",t)("min",e.minDate)("disabled",e.enablenewDateField),m.Bb(1),m.mc("for",t)}}let C=(()=>{class t{constructor(t,e,n,o){this.router=t,this.alertController=e,this.cacheService=n,this.formBuilder=o,this.minDate=new Date,this.contador=0,this.showFieldNewDateRepro=!1,this.infoCommentFail=new m.n,this.ALERT_OPTIONS={header:"Seleccione el motivo"},this.motivos=[{valor:"Reprogramaci\xf3n"},{valor:"Cancelaci\xf3n de la empresa"},{valor:"Otro motivo"}],this.enablenewDateField=!0}ngOnInit(){this.initFormCommentFail();const t=this.cacheService.getSaveCommentsAdvice();0!==Object.keys(t).length&&(this.formCommentFail.patchValue({description:t.description,justify:t.justify,newDateActivity:t.newDateActivity}),setTimeout(()=>{const e=this.validarMotivo(t.motive);this.formCommentFail.controls.motive.setValue(e)},500))}initFormCommentFail(){this.formCommentFail=this.formBuilder.group({description:["",i.q.required],motive:["",i.q.required],justify:["",i.q.required],newDateActivity:["",i.q.required]}),this.formCommentFail.controls.description.valueChanges.subscribe(t=>{this.contador=(t||"").length})}validarMotivo(t){switch(t){case"R":return"Reprogramaci\xf3n";case"C":return"Cancelaci\xf3n de la empresa";case"O":return"Otro motivo"}}changeValueMotive(t){"Reprogramaci\xf3n"===t.detail.value?(this.enablenewDateField=!1,this.showFieldNewDateRepro=!0,this.formCommentFail.controls.newDateActivity.enable()):(this.enablenewDateField=!0,this.showFieldNewDateRepro=!1,this.formCommentFail.controls.newDateActivity.disable())}next(){if(this.formCommentFail.invalid)return this.notification("Todos los campos son obligatorios"),void this.infoCommentFail.emit({});if(this.cacheService.getSaveActivitiesSelected().find(t=>parseInt(t.horasEjecutadas,10)>1))return this.notificationHorasEjecutadas("La asesor\xeda NO exitosa no se permite registrar mas de 1 hora"),void this.infoCommentFail.emit({});const t=this.formCommentFail.controls.newDateActivity.value._d?this.formCommentFail.controls.newDateActivity.value._d.toISOString():this.formCommentFail.controls.newDateActivity.value,e={type:this.typeMenu,typeSelected:this.enablenewDateField,description:this.formCommentFail.controls.description.value,motive:this.formCommentFail.controls.motive.value.charAt(0),justify:this.formCommentFail.controls.justify.value,newDateActivity:this.enablenewDateField?"N/A":t,redireccionar:!0};this.infoCommentFail.emit(e)}notification(t){return Object(r.a)(this,void 0,void 0,(function*(){const e=yield this.alertController.create({header:"Atenci\xf3n",backdropDismiss:!1,mode:"ios",message:t,buttons:["ACEPTAR"]});yield e.present(),e.onDidDismiss()}))}notificationHorasEjecutadas(t){return Object(r.a)(this,void 0,void 0,(function*(){const e=yield this.alertController.create({header:"Atenci\xf3n",backdropDismiss:!1,mode:"ios",message:t,buttons:["ACEPTAR"]});yield e.present(),yield e.onDidDismiss(),this.router.navigateByUrl("u/execLog/pending-visits/visit-id/subjects")}))}}return t.\u0275fac=function(e){return new(e||t)(m.Mb(s.g),m.Mb(c.a),m.Mb(a.a),m.Mb(i.b))},t.\u0275cmp=m.Gb({type:t,selectors:[["app-fail"]],inputs:{typeMenu:"typeMenu"},outputs:{infoCommentFail:"infoCommentFail"},decls:22,vars:4,consts:[[1,"formularioFallo",3,"formGroup"],["lines","none"],[1,"p-0"],["position","stacked"],["type","text","maxlength","2000","placeholder","Observaciones y/o recomendaciones ...","formControlName","description","rows","5",1,"bg-light","mt-3","pl-1"],[2,"margin-bottom","15px"],["mode","ios","interface","action-sheet","formControlName","motive","cancelText","CANCELAR",1,"bg-light","mt-3","rounded","pl-1","pr-1",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"p-0","mt-3"],["formControlName","justify","rows","5",1,"bg-light","mt-3","pl-1"],["class","p-0 mt-3",4,"ngIf"],[1,"ion-text-center","mt-5"],["color","primary",3,"click"],[3,"value"],[1,"bg-light","mt-3","rounded","pl-1","pr-1",2,"width","100%"],["readonly","","matInput","","formControlName","newDateActivity",3,"matDatepicker","min","disabled"],["matSuffix","",3,"for"],["picker",""]],template:function(t,e){1&t&&(m.Sb(0,"ion-content"),m.Sb(1,"form",0),m.Sb(2,"ion-list",1),m.Sb(3,"ion-item",2),m.Sb(4,"ion-label",3),m.Cc(5,"Observaciones y recomendaciones"),m.Rb(),m.Nb(6,"ion-textarea",4),m.Sb(7,"span",5),m.Cc(8),m.Rb(),m.Rb(),m.Sb(9,"ion-item",2),m.Sb(10,"ion-label",3),m.Cc(11,"Motivo"),m.Rb(),m.Sb(12,"ion-select",6),m.ac("ionChange",(function(t){return e.changeValueMotive(t)})),m.Ac(13,p,2,2,"ion-select-option",7),m.Rb(),m.Rb(),m.Sb(14,"ion-item",8),m.Sb(15,"ion-label",3),m.Cc(16,"Justificaci\xf3n"),m.Rb(),m.Nb(17,"ion-textarea",9),m.Rb(),m.Ac(18,h,8,4,"ion-item",10),m.Sb(19,"div",11),m.Sb(20,"ion-button",12),m.ac("click",(function(){return e.next()})),m.Cc(21,"Continuar"),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb()),2&t&&(m.Bb(1),m.mc("formGroup",e.formCommentFail),m.Bb(7),m.Ec("",e.contador,"/2000"),m.Bb(5),m.mc("ngForOf",e.motivos),m.Bb(5),m.mc("ngIf",e.showFieldNewDateRepro))},directives:[c.q,i.r,i.m,i.f,c.G,c.A,c.F,c.U,c.jb,i.h,i.l,i.d,c.N,c.ib,o.k,o.l,c.h,c.O,d.a,u.b,i.a,b.b,b.d,d.d,b.a],styles:["ion-content[_ngcontent-%COMP%]   .formularioFallo[_ngcontent-%COMP%]{margin-bottom:150px}ion-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{background:none}ion-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background:none}ion-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{border-radius:10px}ion-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius:50px}.label-stacked.sc-ion-label-md-h[_ngcontent-%COMP%]{transform:none}ion-list[_ngcontent-%COMP%]{padding-left:var(--ion-padding,16px);padding-right:var(--ion-padding,16px)}  .alert-wrapper{--width:calc(100vw - 40px);--max-width:calc(100vw - 40px)}"]}),t})();function g(t,e){if(1&t){const t=m.Tb();m.Sb(0,"app-success",14),m.ac("infoCommentSuccess",(function(e){return m.tc(t),m.ec().getInfoComment(e)})),m.Rb()}if(2&t){const t=m.ec();m.mc("typeMenu",t.subframe)}}function f(t,e){if(1&t){const t=m.Tb();m.Sb(0,"app-fail",15),m.ac("infoCommentFail",(function(e){return m.tc(t),m.ec().getInfoComment(e)})),m.Rb()}if(2&t){const t=m.ec();m.mc("typeMenu",t.subframe)}}const v=function(t,e){return{primary:t,transparent:e}},S=[{path:"",component:(()=>{class t{constructor(t,e,n){this.cacheService=t,this.router=e,this.alertController=n,this.SUCCESS_FRAME="Exitosa",this.FAIL_FRAME="Fallo",this.subframe=this.SUCCESS_FRAME,this.opcionMenu=this.subframe}ngOnInit(){const t=this.cacheService.getSaveCommentsAdvice();0!==Object.keys(t).length&&("Fallo"===t.type&&this.switchFrame("Fallo"),"Exitosa"===t.type&&this.switchFrame("Exitosa"))}switchFrame(t){"Proyecto"===this.cacheService.typeAdvice.type?(this.notification("Atenci\xf3n","El tipo de asesor\xeda seleccionada fue por Proyecto"),this.subframe=this.SUCCESS_FRAME,this.opcionMenu=this.subframe):(this.subframe=t,this.opcionMenu=this.subframe)}getInfoComment(t){this.cacheService.saveCommentsAdvice(t),!0===this.cacheService.getSaveCommentsAdvice().redireccionar&&this.router.navigateByUrl("/u/execLog/pending-visits/visit-id/company-info/comments/survey-signature")}notification(t,e){return Object(r.a)(this,void 0,void 0,(function*(){const n=yield this.alertController.create({header:t,backdropDismiss:!1,mode:"ios",message:e,buttons:["ACEPTAR"]});n.onDidDismiss(),yield n.present()}))}}return t.\u0275fac=function(e){return new(e||t)(m.Mb(a.a),m.Mb(s.g),m.Mb(c.a))},t.\u0275cmp=m.Gb({type:t,selectors:[["app-comments"]],decls:23,vars:11,consts:[["size","2"],["color","tertiary"],["slot","start"],["color","primary","mode","md","defaultHref","/"],["size","10"],[1,"titulo"],[1,"mt-5","text-center","result-selector"],[1,"ion-text-center",2,"width","100%"],[1,"result-wrapper","d-inline-block","rounded"],[1,"btn","transparent","rounded","ion-text-md-uppercase",3,"ngClass","click"],[1,"btn","primary","rounded","ion-text-md-uppercase",3,"ngClass","click"],[3,"ngSwitch"],[3,"typeMenu","infoCommentSuccess",4,"ngSwitchCase"],[3,"typeMenu","infoCommentFail",4,"ngSwitchCase"],[3,"typeMenu","infoCommentSuccess"],[3,"typeMenu","infoCommentFail"]],template:function(t,e){1&t&&(m.Sb(0,"ion-header"),m.Sb(1,"ion-grid"),m.Sb(2,"ion-row"),m.Sb(3,"ion-col",0),m.Sb(4,"ion-toolbar",1),m.Sb(5,"ion-buttons",2),m.Nb(6,"ion-back-button",3),m.Rb(),m.Rb(),m.Rb(),m.Sb(7,"ion-col",4),m.Sb(8,"ion-title",5),m.Cc(9,"Observaciones y recomendaciones"),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Sb(10,"ion-content"),m.Sb(11,"div",6),m.Sb(12,"div",7),m.Sb(13,"h3"),m.Cc(14,"\xbfLa asesor\xeda fue exitosa?"),m.Rb(),m.Rb(),m.Sb(15,"span",8),m.Sb(16,"button",9),m.ac("click",(function(){return e.switchFrame(e.SUCCESS_FRAME)})),m.Cc(17," S\xed "),m.Rb(),m.Sb(18,"button",10),m.ac("click",(function(){return e.switchFrame(e.FAIL_FRAME)})),m.Cc(19," No "),m.Rb(),m.Rb(),m.Rb(),m.Qb(20,11),m.Ac(21,g,1,1,"app-success",12),m.Ac(22,f,1,1,"app-fail",13),m.Pb(),m.Rb()),2&t&&(m.Bb(16),m.mc("ngClass",m.pc(5,v,e.subframe===e.SUCCESS_FRAME,e.subframe!==e.SUCCESS_FRAME)),m.Bb(2),m.mc("ngClass",m.pc(8,v,e.subframe===e.FAIL_FRAME,e.subframe!==e.FAIL_FRAME)),m.Bb(2),m.mc("ngSwitch",e.subframe),m.Bb(1),m.mc("ngSwitchCase",e.SUCCESS_FRAME),m.Bb(1),m.mc("ngSwitchCase",e.FAIL_FRAME))},directives:[c.w,c.v,c.L,c.p,c.Y,c.i,c.e,c.f,c.W,c.q,o.j,o.n,o.o,l,C],styles:["ion-header[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{color:#fff}ion-header[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:0;background:#95a6b1}ion-header[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{padding:0}ion-header[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius:50px}.result-selector[_ngcontent-%COMP%]   .result-wrapper[_ngcontent-%COMP%]{border:2px solid var(--ion-color-primary)}.result-selector[_ngcontent-%COMP%]   .result-wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding-left:50px;padding-right:50px}.titulo[_ngcontent-%COMP%]{width:100%!important;font-size:18px!important;text-align:left;padding:0;margin-top:15px}"]}),t})()},{path:"survey-signature",loadChildren:()=>n.e(2).then(n.bind(null,"7uMb")).then(t=>t.SurveyAndSignaturePageModule)}];let M=(()=>{class t{}return t.\u0275mod=m.Kb({type:t}),t.\u0275inj=m.Jb({factory:function(e){return new(e||t)},imports:[[s.j.forChild(S)],s.j]}),t})();var y=n("j14s"),O=n("1yaQ");const F={parse:{dateInput:"LL"},display:{dateInput:"LL",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}};let w=(()=>{class t{}return t.\u0275mod=m.Kb({type:t}),t.\u0275inj=m.Jb({factory:function(e){return new(e||t)},providers:[{provide:y.d,useValue:"es-ES"},{provide:y.a,useClass:O.b,deps:[y.d,O.a]},{provide:y.c,useValue:F}],imports:[[o.c,i.g,c.Z,i.p,M,b.c,d.c,y.g,u.c]]}),t})()}}]);