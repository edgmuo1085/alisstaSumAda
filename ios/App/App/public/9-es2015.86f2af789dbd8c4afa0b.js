(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"To/f":function(t,e,i){"use strict";i.r(e),i.d(e,"MY_FORMATS",(function(){return _})),i.d(e,"VisitTypePageModule",(function(){return w}));var o=i("ofXK"),n=i("3Pt+"),c=i("mrSG"),r=i("C6fG"),a=i("fXoL"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ANDROID_THEMES={THEME_TRADITIONAL:1,THEME_HOLO_DARK:2,THEME_HOLO_LIGHT:3,THEME_DEVICE_DEFAULT_DARK:4,THEME_DEVICE_DEFAULT_LIGHT:5},e}Object(c.c)(e,t),e.prototype.show=function(t){return Object(r.c)(this,"show",{},arguments)},e.pluginName="DatePicker",e.plugin="cordova-plugin-datepicker",e.pluginRef="datePicker",e.repo="https://github.com/VitaliiBlagodir/cordova-plugin-datepicker",e.platforms=["Android","iOS","Windows"],e.\u0275fac=function(t){return i(t||e)},e.\u0275prov=a.Ib({token:e,factory:function(t){return e.\u0275fac(t)}});var i=a.Ub(e);return e}(r.a),l=i("TEn/"),d=i("tyNb"),u=i("AC/E"),p=i("wd/R");function b(t,e){1&t&&a.Nb(0,"ion-datetime",13)}function h(t,e){1&t&&(a.Sb(0,"ion-label"),a.Cc(1,"Horas totales: 0"),a.Rb())}function f(t,e){if(1&t&&(a.Sb(0,"ion-label"),a.Cc(1),a.Rb()),2&t){const t=a.ec(2);a.Bb(1),a.Ec("Horas totales: ",t.totalHours,"")}}function S(t,e){if(1&t){const t=a.Tb();a.Sb(0,"form",1),a.Sb(1,"ion-list",2),a.Sb(2,"ion-item",2),a.Nb(3,"ion-icon",3),a.Sb(4,"strong"),a.Sb(5,"label",4),a.Cc(6,"Fecha de asesor\xeda espec\xedfica"),a.Rb(),a.Rb(),a.Rb(),a.Ac(7,b,1,0,"ion-datetime",5),a.Sb(8,"ion-button",6),a.ac("click",(function(){return a.tc(t),a.ec().startTodaySpecific()})),a.Cc(9," INICIAR HOY ASESORIA ESPECIFICA "),a.Rb(),a.Sb(10,"ion-item",7),a.Nb(11,"ion-icon",8),a.Sb(12,"strong"),a.Sb(13,"ion-label"),a.Cc(14,"Hora de Inicio"),a.Rb(),a.Rb(),a.Rb(),a.Sb(15,"ion-datetime",9),a.ac("ionChange",(function(e){return a.tc(t),a.ec().changeHourStar(e)})),a.Rb(),a.Sb(16,"ion-item",10),a.Nb(17,"ion-icon",8),a.Sb(18,"strong"),a.Sb(19,"ion-label"),a.Cc(20,"Hora Finalizaci\xf3n"),a.Rb(),a.Rb(),a.Rb(),a.Sb(21,"ion-datetime",11),a.ac("ionChange",(function(e){return a.tc(t),a.ec().changeHourEnd(e)})),a.Rb(),a.Sb(22,"ion-item",10),a.Sb(23,"strong"),a.Ac(24,h,2,0,"ion-label",12),a.Rb(),a.Sb(25,"strong"),a.Ac(26,f,2,1,"ion-label",12),a.Rb(),a.Rb(),a.Rb(),a.Rb()}if(2&t){const t=a.ec();a.mc("formGroup",t.formDateSpecific),a.Bb(7),a.mc("ngIf",t.showStartTodaySpecificAdvice),a.Bb(1),a.mc("disabled",t.disabledBtnDateStart),a.Bb(13),a.mc("disabled",!t.customStartDate),a.Bb(3),a.mc("ngIf",!t.totalHours),a.Bb(2),a.mc("ngIf",t.totalHours)}}let m=(()=>{class t{constructor(t,e,i,o){this.datePicker=t,this.cacheService=e,this.formBuilder=i,this.alertController=o,this.dateStartSpecific=new a.n,this.specificStartHourSelected=new a.n,this.specificEndHourSelected=new a.n,this.specificTotalHour=new a.n,this.showButtonNext=new a.n,this.showStartTodaySpecificAdvice=!1,this.disabledBtnDateStart=!1}ngOnInit(){this.initFormDateSpecific();const t=this.cacheService.getSaveTypeAdvice();0!==Object.keys(t).length&&"Especifica"===t.type&&(this.formDateSpecific.patchValue({startTodaySecific:p(t.fechaInicialAsesoria,"YYYY-MM-DD").toISOString(),startHour:p(t.startHour,"hh:mm A").toISOString(),endHour:p(t.endHour,"hh:mm A").toISOString()}),this.setVisitDate(t.fechaInicialAsesoria),this.setInitialHour(t.startHour),this.setEndHour(t.endHour))}initFormDateSpecific(){this.formDateSpecific=this.formBuilder.group({startTodaySecific:["",n.q.required],startHour:["",n.q.required],endHour:["",n.q.required]})}startTodaySpecific(){this.notification("Est\xe1 seguro de iniciar la actividad en este momento, recuerde que esta fecha no puede modificarse."),this.setVisitDate(p().startOf("day").toISOString().split("T")[0])}changeHourStar(t){this.setInitialHour(t.detail.value.split("T")[1])}changeHourEnd(t){this.setEndHour(t.detail.value.split("T")[1])}validateHours(t,e,i){return Object(c.a)(this,void 0,void 0,(function*(){const o=t.split(":"),n=e.split(":");if(parseInt(n[0],10)===parseInt(o[0],10)&&parseInt(n[0],10)-parseInt(o[0],10)<i)return"No se puede";if(parseInt(n[0],10)>parseInt(o[0],10)){const c=parseInt(n[0],10)-parseInt(o[0],10);if(60*c+ +this.validateMinutes(t,e,i)+(yield this.cacheService.getRegisteredTime())<=600)return c>=i?c.toString():"No se puede";this.notification("Excede las horas permitidas a ejecutar. Las cuales son hasta 10 horas por d\xeda")}else this.totalHours=0,this.notification("La hora final no puede ser menor a la hora inicial")}))}validateMinutes(t,e,i){const o=t.split(":"),n=e.split(":");return parseInt(n[1],10)>parseInt(o[1],10)?(parseInt(n[1],10)-parseInt(o[1],10)).toString():(parseInt(o[1],10)-parseInt(n[1],10)).toString()}notification(t){return Object(c.a)(this,void 0,void 0,(function*(){const e=yield this.alertController.create({header:"Atenci\xf3n",backdropDismiss:!1,mode:"ios",message:t,buttons:["ACEPTAR"]});e.onDidDismiss(),yield e.present()}))}setVisitDate(t){this.date=t,this.formDateSpecific.controls.startTodaySecific.setValue(this.date),this.disabledBtnDateStart=!0,this.showStartTodaySpecificAdvice=!0,this.dateStartSpecific.emit(this.date),this.showButtonNext.emit(this.formDateSpecific.controls.endHour.valid)}setInitialHour(t){this.customStartDate=t,this.validateVisitDuration()}setEndHour(t){this.customEndDate=t,this.validateVisitDuration()}validateVisitDuration(){return Object(c.a)(this,void 0,void 0,(function*(){if(!this.customStartDate||!this.customEndDate)return;const t=this.cacheService.migratedHours;let e;switch(yield this.validateHours(this.customStartDate,this.customEndDate,t)){case void 0:e=!1,this.totalHours=0,this.formDateSpecific.controls.endHour.reset();break;case"No se puede":e=!1,this.totalHours=0,this.formDateSpecific.controls.endHour.reset(),this.notification(`No es posible ya que las horas de esta actividad no pueden ser menores a ${t} horas.`);break;default:const i=p(),o=i.format("YYYY-MM-DD")+"T"+this.customStartDate,n=i.format("YYYY-MM-DD")+"T"+this.customEndDate,c=p(o),r=p(n),a=p.duration(r.diff(c)),s=Math.floor(a.asHours()),l=Math.floor(a.asMinutes()%60);s+l/60<t?(e=!1,this.totalHours=0,this.formDateSpecific.controls.endHour.reset(),this.notification(`No es posible ya que las horas de esta actividad no pueden ser menores a ${t} horas.`)):(e=!!this.date,this.totalHours=s+" Horas "+l+" Minutos")}this.specificStartHourSelected.emit(this.customStartDate),this.specificEndHourSelected.emit(this.customEndDate),this.specificTotalHour.emit(this.totalHours),this.showButtonNext.emit(e)}))}}return t.\u0275fac=function(e){return new(e||t)(a.Mb(s),a.Mb(u.a),a.Mb(n.b),a.Mb(l.a))},t.\u0275cmp=a.Gb({type:t,selectors:[["app-specific"]],outputs:{dateStartSpecific:"dateStartSpecific",specificStartHourSelected:"specificStartHourSelected",specificEndHourSelected:"specificEndHourSelected",specificTotalHour:"specificTotalHour",showButtonNext:"showButtonNext"},decls:2,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["lines","none"],["name","calendar-outline","slot","start"],[1,"d-block"],["placeholder","DD MMMM YYYY","display-format","DD MMM YYYY","monthShortNames","Enero, Febrero, Marzo, Abril, Mayo, Junio, Julio, Agosto, Septiembre, Octubre, Noviembre, Diciembre","color","primary","formControlName","startTodaySecific","mode","ios","disabled","","class","ionDateTimeStart","cancelText","Cancelar",4,"ngIf"],["expand","block","color","primary",3,"disabled","click"],["lines","none",1,"mt-3"],["name","time-outline","slot","start"],["placeholder","Hora Inicial","displayFormat","hh:mm A","cancelText","CANCELAR","doneText","ACEPTAR","mode","ios","formControlName","startHour",1,"ionDateTimeStart",3,"ionChange"],[1,"mt-3"],["placeholder","Hora Final","cancelText","CANCELAR","doneText","ACEPTAR","mode","ios","formControlName","endHour","displayFormat","hh:mm A",1,"ionDateTimeStart",3,"disabled","ionChange"],[4,"ngIf"],["placeholder","DD MMMM YYYY","display-format","DD MMM YYYY","monthShortNames","Enero, Febrero, Marzo, Abril, Mayo, Junio, Julio, Agosto, Septiembre, Octubre, Noviembre, Diciembre","color","primary","formControlName","startTodaySecific","mode","ios","disabled","","cancelText","Cancelar",1,"ionDateTimeStart"]],template:function(t,e){1&t&&(a.Sb(0,"ion-content"),a.Ac(1,S,27,6,"form",0),a.Rb()),2&t&&(a.Bb(1),a.mc("ngIf",e.formDateSpecific))},directives:[l.q,o.l,n.r,n.m,n.f,l.G,l.A,l.x,l.h,l.F,l.r,l.ib,n.l,n.d],styles:["ion-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{background:none}ion-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background:none}ion-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius:40px}.label-stacked.sc-ion-label-md-h[_ngcontent-%COMP%]{transform:none}ion-list[_ngcontent-%COMP%]{padding-left:var(--ion-padding,16px);padding-right:var(--ion-padding,16px)}.ionDateTimeStart[_ngcontent-%COMP%]{padding:0!important;font-size:20px;font-weight:bolder;text-align:center}"]}),t})(),g=(()=>{class t{constructor(t){this.cacheService=t,this.projectDateSelected=new a.n,this.showButtonNext=new a.n,this.dateSelectedProject=new Date,this.currentYear=(new Date).getFullYear()}ngOnInit(){const t=this.cacheService.getSaveTypeAdvice();0!==Object.keys(t).length&&"Proyecto"===t.type&&this.setDate(t.date)}dateSelectec(t){this.setDate(t.detail.value)}setDate(t){this.date=new Date(t).toISOString(),this.projectDateSelected.emit(this.date),this.showButtonNext.emit(!0)}}return t.\u0275fac=function(e){return new(e||t)(a.Mb(u.a))},t.\u0275cmp=a.Gb({type:t,selectors:[["app-per-project"]],outputs:{projectDateSelected:"projectDateSelected",showButtonNext:"showButtonNext"},decls:10,vars:4,consts:[["lines","none"],[1,"p-0"],[1,"w-100"],[1,"ion-text-center"],[1,"d-block"],[1,"mt-3"],["placeholder","Seleccione (MES - A\xd1O)","display-format","MMM YYYY","monthShortNames","Enero, Febrero, Marzo, Abril, Mayo, Junio, Julio, Agosto, Septiembre, Octubre, Noviembre, Diciembre","color","primary","cancelText","CANCELAR","doneText","ACEPTAR","cancelText","Cancelar",1,"ionDateTimeStart",3,"pickerOptions","min","max","value","ionChange"]],template:function(t,e){1&t&&(a.Sb(0,"ion-content"),a.Sb(1,"ion-list",0),a.Sb(2,"ion-item",1),a.Sb(3,"div",2),a.Sb(4,"div",3),a.Sb(5,"strong"),a.Sb(6,"label",4),a.Cc(7,"Fecha de asesor\xeda del proyecto (Mes/a\xf1o) "),a.Rb(),a.Rb(),a.Rb(),a.Sb(8,"div",5),a.Sb(9,"ion-datetime",6),a.ac("ionChange",(function(t){return e.dateSelectec(t)})),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb()),2&t&&(a.Bb(9),a.mc("pickerOptions",e.customPickerOptionsProjectDate)("min",e.currentYear)("max",e.currentYear)("value",e.date))},directives:[l.q,l.G,l.A,l.r,l.ib],styles:["ion-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{background:none}ion-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background:none}.label-stacked.sc-ion-label-md-h[_ngcontent-%COMP%]{transform:none}ion-list[_ngcontent-%COMP%]{padding-left:var(--ion-padding,16px);padding-right:var(--ion-padding,16px)}.ionDateTimeStart[_ngcontent-%COMP%]{padding:0!important;font-size:20px;font-weight:bolder;text-align:center}.mat-form-field-appearance-fill[_ngcontent-%COMP%], .mat-form-field-flex[_ngcontent-%COMP%]{background:transparent!important}"]}),t})();function M(t,e){if(1&t){const t=a.Tb();a.Sb(0,"app-specific",15),a.ac("dateStartSpecific",(function(e){return a.tc(t),a.ec().getDateStart(e)}))("specificStartHourSelected",(function(e){return a.tc(t),a.ec().getSpecificStartHour(e)}))("specificEndHourSelected",(function(e){return a.tc(t),a.ec().getSpecificEndHour(e)}))("specificTotalHour",(function(e){return a.tc(t),a.ec().getTotalHoursSpecific(e)}))("showButtonNext",(function(e){return a.tc(t),a.ec().getShowButtonNext(e)})),a.Rb()}}function C(t,e){if(1&t){const t=a.Tb();a.Sb(0,"app-per-project",16),a.ac("showButtonNext",(function(e){return a.tc(t),a.ec().getShowButtonNext(e)}))("projectDateSelected",(function(e){return a.tc(t),a.ec().getProjectDateSelected(e)})),a.Rb()}}function v(t,e){if(1&t){const t=a.Tb();a.Sb(0,"ion-fab",17),a.ac("click",(function(){return a.tc(t),a.ec().next()})),a.Sb(1,"ion-button",18),a.Cc(2," Continuar "),a.Rb(),a.Rb()}}const H=function(t,e){return{primary:t,transparent:e}},E=[{path:"",component:(()=>{class t{constructor(t,e,i){this.router=t,this.cacheService=e,this.alertController=i,this.SPECIFIC_FRAME="Especifica",this.PER_PROJECT_FRAME="Proyecto",this.objectSpecific={},this.objectProject={}}ngOnInit(){const t=this.cacheService.getSaveTypeAdvice();this.subframe=0===Object.keys(t).length?this.SPECIFIC_FRAME:t.type}switchFrame(t){this.subframe=t}getDateStart(t){this.dateSpecific=t}getSpecificStartHour(t){this.startHourSpecific=t}getSpecificEndHour(t){this.endHourSpecific=t}getTotalHoursSpecific(t){this.totalHourSpecific=t}getShowButtonNext(t){this.showButtonNext=t}getProjectDateSelected(t){this.dateProject=t}next(){if("Especifica"===this.subframe)return this.objectSpecific={type:this.subframe,typeSelected:!0,fechaInicialAsesoria:this.dateSpecific,startHour:this.startHourSpecific,endHour:this.endHourSpecific,totalHours:this.totalHourSpecific},this.cacheService.saveTypeAdvice(this.objectSpecific),void this.router.navigateByUrl("/u/execLog/pending-visits/visit-id/subjects/type/company-info");if("Proyecto"===this.subframe&&this.dateProject){const t=this.dateProject.split("T")[0].split("-"),e=this.changeTextForMounth(t[1]);this.objectProject={type:this.subframe,typeSelected:!0,year:t[0],month:e,date:this.dateProject},this.cacheService.saveTypeAdvice(this.objectProject),this.router.navigateByUrl("/u/execLog/pending-visits/visit-id/subjects/type/company-info")}}changeTextForMounth(t){switch(t){case"01":return"Enero";case"02":return"Febrero";case"03":return"Marzo";case"04":return"Abril";case"05":return"Mayo";case"06":return"Junio";case"07":return"Julio";case"08":return"Agosto";case"09":return"Septiembre";case"10":return"Octubre";case"11":return"Noviembre";case"12":return"Diciembre"}}Alert(){return Object(c.a)(this,void 0,void 0,(function*(){const t=yield this.alertController.create({header:"Atenci\xf3n",mode:"ios",message:this.messageNotificacion,buttons:["ACEPTAR"]});yield t.present()}))}}return t.\u0275fac=function(e){return new(e||t)(a.Mb(d.g),a.Mb(u.a),a.Mb(l.a))},t.\u0275cmp=a.Gb({type:t,selectors:[["app-visit-type"]],decls:21,vars:12,consts:[[1,"ion-no-border"],["size","2"],["color","tertiary"],["slot","start"],["mode","md","color","primary","defaultHref","/"],["size","10"],[1,"titulo"],[1,"mt-5","text-center","visit-selector"],[1,"selector-wrapper","d-inline-block","rounded"],[1,"btn","primary","rounded","ion-text-md-uppercase",3,"ngClass","click"],[1,"btn","transparent","rounded","ion-text-md-uppercase",3,"ngClass","click"],[3,"ngSwitch"],[3,"dateStartSpecific","specificStartHourSelected","specificEndHourSelected","specificTotalHour","showButtonNext",4,"ngSwitchCase"],[3,"showButtonNext","projectDateSelected",4,"ngSwitchCase"],["vertical","bottom","horizontal","center","slot","fixed",3,"click",4,"ngIf"],[3,"dateStartSpecific","specificStartHourSelected","specificEndHourSelected","specificTotalHour","showButtonNext"],[3,"showButtonNext","projectDateSelected"],["vertical","bottom","horizontal","center","slot","fixed",3,"click"],["color","primary","mode","ios","expand","block",1,"btn"]],template:function(t,e){1&t&&(a.Sb(0,"ion-header",0),a.Sb(1,"ion-grid"),a.Sb(2,"ion-row"),a.Sb(3,"ion-col",1),a.Sb(4,"ion-toolbar",2),a.Sb(5,"ion-buttons",3),a.Nb(6,"ion-back-button",4),a.Rb(),a.Rb(),a.Rb(),a.Sb(7,"ion-col",5),a.Sb(8,"ion-title",6),a.Cc(9,"Tipo de asesor\xeda"),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(10,"ion-content"),a.Sb(11,"div",7),a.Sb(12,"span",8),a.Sb(13,"button",9),a.ac("click",(function(){return e.switchFrame(e.SPECIFIC_FRAME)})),a.Cc(14," Espec\xedfica "),a.Rb(),a.Sb(15,"button",10),a.ac("click",(function(){return e.switchFrame(e.PER_PROJECT_FRAME)})),a.Cc(16," Por proyecto "),a.Rb(),a.Rb(),a.Rb(),a.Qb(17,11),a.Ac(18,M,1,0,"app-specific",12),a.Ac(19,C,1,0,"app-per-project",13),a.Pb(),a.Ac(20,v,3,0,"ion-fab",14),a.Rb()),2&t&&(a.Bb(13),a.mc("ngClass",a.pc(6,H,e.subframe===e.SPECIFIC_FRAME,e.subframe!==e.SPECIFIC_FRAME)),a.Bb(2),a.mc("ngClass",a.pc(9,H,e.subframe===e.PER_PROJECT_FRAME,e.subframe!==e.PER_PROJECT_FRAME)),a.Bb(2),a.mc("ngSwitch",e.subframe),a.Bb(1),a.mc("ngSwitchCase",e.SPECIFIC_FRAME),a.Bb(1),a.mc("ngSwitchCase",e.PER_PROJECT_FRAME),a.Bb(1),a.mc("ngIf",e.showButtonNext))},directives:[l.w,l.v,l.L,l.p,l.Y,l.i,l.e,l.f,l.W,l.q,o.j,o.n,o.o,o.l,m,g,l.s,l.h],styles:["ion-header[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{color:#fff}ion-header[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:0;background:#95a6b1}ion-header[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{padding:0}.visit-selector[_ngcontent-%COMP%]   .selector-wrapper[_ngcontent-%COMP%]{border:2px solid var(--ion-color-primary)}.visit-selector[_ngcontent-%COMP%]   .selector-wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding-left:50px;padding-right:50px;height:40px;outline:none!important}.titulo[_ngcontent-%COMP%]{width:100%!important;font-size:25px!important;text-align:left;padding:10px 0 0}.positionButton[_ngcontent-%COMP%]{transform:translateY(-200px)}ion-fab[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-left:-20px}"]}),t})()},{path:"company-info",loadChildren:()=>i.e(6).then(i.bind(null,"rMLn")).then(t=>t.CompanyInfoPageModule)}];let P=(()=>{class t{}return t.\u0275mod=a.Kb({type:t}),t.\u0275inj=a.Jb({factory:function(e){return new(e||t)},imports:[[d.j.forChild(E)],d.j]}),t})();var y=i("r3oX"),D=i("/o1g"),O=i("j14s"),R=i("IRfi"),A=i("A2Vd"),T=i("1yaQ");const _={parse:{dateInput:"MMMM YYYY"},display:{dateInput:"MMMM YYYY",monthYearLabel:"MMMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}};let w=(()=>{class t{}return t.\u0275mod=a.Kb({type:t}),t.\u0275inj=a.Jb({factory:function(e){return new(e||t)},providers:[s,{provide:O.d,useValue:"es-ES"},{provide:O.a,useClass:T.b,deps:[O.d,T.a]},{provide:O.c,useValue:_}],imports:[[o.c,n.g,n.p,l.Z,y.a,P,D.c,O.g,R.c,A.c,y.a.setLocale("es-ES")]]}),t})()}}]);