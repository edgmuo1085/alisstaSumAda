function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},r=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(x){s=function(t,e,n){return t[e]=n}}function u(t,e,n,i){var r=e&&e.prototype instanceof d?e:d,c=Object.create(r.prototype),a=new P(i||[]);return o(c,"_invoke",{value:w(t,n,a)}),c}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(x){return{type:"throw",arg:x}}}t.wrap=u;var f={};function d(){}function h(){}function b(){}var p={};s(p,r,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(_([])));g&&g!==e&&n.call(g,r)&&(p=g);var m=b.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){var i;o(this,"_invoke",{value:function(o,r){function c(){return new e((function(i,c){!function o(i,r,c,a){var s=l(t[i],t,r);if("throw"!==s.type){var u=s.arg,f=u.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,c,a)}),(function(t){o("throw",t,c,a)})):e.resolve(f).then((function(t){u.value=t,c(u)}),(function(t){return o("throw",t,c,a)}))}a(s.arg)}(o,r,i,c)}))}return i=i?i.then(c,c):c()}})}function w(t,e,n){var o="suspendedStart";return function(i,r){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===i)throw r;return O()}for(n.method=i,n.arg=r;;){var c=n.delegate;if(c){var a=R(c,n);if(a){if(a===f)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var s=l(t,e,n);if("normal"===s.type){if(o=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o="completed",n.method="throw",n.arg=s.arg)}}}function R(t,e){var n=e.method,o=t.iterator[n];if(void 0===o)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,R(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(o,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,f;var r=i.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function _(t){if(t){var e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return h.prototype=b,o(m,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:h,configurable:!0}),h.displayName=s(b,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},y(S.prototype),s(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,o,i,r){void 0===r&&(r=Promise);var c=new S(u(e,n,o,i),r);return t.isGeneratorFunction(n)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},y(m),s(m,a,"Generator"),s(m,r,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var o in e)n.push(o);return n.reverse(),function t(){for(;n.length;){var o=n.pop();if(o in e)return t.value=o,t.done=!1,t}return t.done=!0,t}},t.values=_,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return c.type="throw",c.arg=t,e.next=n,o&&(e.method="next",e.arg=void 0),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],c=r.completion;if("root"===r.tryLoc)return o("end");if(r.tryLoc<=this.prev){var a=n.call(r,"catchLoc"),s=n.call(r,"finallyLoc");if(a&&s){if(this.prev<r.catchLoc)return o(r.catchLoc,!0);if(this.prev<r.finallyLoc)return o(r.finallyLoc)}else if(a){if(this.prev<r.catchLoc)return o(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return o(r.finallyLoc)}}}},abrupt:function(t,e){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var c=r?r.completion:{};return c.type=t,c.arg=e,r?(this.method="next",this.next=r.finallyLoc,f):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var o=n.completion;if("throw"===o.type){var i=o.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:_(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,_toPropertyKey(o.key),o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"==typeof e?e:String(e)}function _toPrimitive(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"4fRq":function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var o=new Uint8Array(16);t.exports=function(){return n(o),o}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}},EcEN:function(t,e,n){var o=n("xDdU"),i=n("xk4V"),r=i;r.v1=o,r.v4=i,t.exports=r},F7bV:function(t,e,n){"use strict";n.d(e,"b",(function(){return r}));var o=n("FUe0"),i=n("cyLK");n.d(e,"a",(function(){return i.a}));var r=Object(o.d)("Filesystem",{web:function(){return n.e(50).then(n.bind(null,"B5q2")).then((function(t){return new t.FilesystemWeb}))}})},I2ZF:function(t,e){for(var n=[],o=0;o<256;++o)n[o]=(o+256).toString(16).substr(1);t.exports=function(t,e){var o=e||0;return[n[t[o++]],n[t[o++]],n[t[o++]],n[t[o++]],"-",n[t[o++]],n[t[o++]],"-",n[t[o++]],n[t[o++]],"-",n[t[o++]],n[t[o++]],"-",n[t[o++]],n[t[o++]],n[t[o++]],n[t[o++]],n[t[o++]],n[t[o++]]].join("")}},cyLK:function(t,e,n){"use strict";var o,i;n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i})),function(t){t.Documents="DOCUMENTS",t.Data="DATA",t.Library="LIBRARY",t.Cache="CACHE",t.External="EXTERNAL",t.ExternalStorage="EXTERNAL_STORAGE"}(o||(o={})),function(t){t.UTF8="utf8",t.ASCII="ascii",t.UTF16="utf16"}(i||(i={}))},dTEF:function(t,e,n){"use strict";var o,i,r;n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r})),function(t){t.Prompt="PROMPT",t.Camera="CAMERA",t.Photos="PHOTOS"}(o||(o={})),function(t){t.Rear="REAR",t.Front="FRONT"}(i||(i={})),function(t){t.Uri="uri",t.Base64="base64",t.DataUrl="dataUrl"}(r||(r={}))},g3sV:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var o,i=n("mrSG"),r=n("FUe0"),c=n("dTEF"),a=Object(r.d)("Camera",{web:function(){return n.e(49).then(n.bind(null,"wzPO")).then((function(t){return new t.CameraWeb}))}}),s=n("fXoL"),u=((o=function(){function t(){_classCallCheck(this,t),this.photos=[]}return _createClass(t,[{key:"addNewToGallery",value:function(){return Object(i.a)(this,void 0,void 0,_regeneratorRuntime().mark((function t(){var e;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.getPhoto({resultType:c.b.DataUrl,source:c.c.Camera,quality:60});case 2:return e=t.sent,t.abrupt("return",{format:e.format,base64Imagen:e.dataUrl,idFoto:(new Date).getTime().toString(16)});case 4:case"end":return t.stop()}}),t)})))}},{key:"deletePhoto",value:function(t,e){var n=t.idFoto,o=this.photos.find((function(t){return t.idFoto===n}));o&&this.photos.splice(o,1)}}]),t}()).\u0275fac=function(t){return new(t||o)},o.\u0275prov=s.Ib({token:o,factory:o.\u0275fac,providedIn:"root"}),o)},mvFa:function(t,e,n){"use strict";n.r(e),n.d(e,"UploaderPageModule",(function(){return j}));var o=n("ofXK"),i=n("TEn/"),r=n("tyNb"),c=n("mrSG"),a=n("FAH8"),s=n("EcEN"),u=n("g3sV"),l=n("AC/E"),f=n("F7bV"),d=n("fXoL"),h=n("3Pt+"),b=n("e8h1"),p=["inputFile"];function v(t,e){if(1&t&&d.Nb(0,"img",33),2&t){var n=d.ec().$implicit;d.mc("src",n.foto.base64Imagen,d.vc)}}function g(t,e){if(1&t&&(d.Sb(0,"ion-label",34),d.Cc(1),d.Rb()),2&t){var n=d.ec().$implicit;d.Bb(1),d.Fc(" ",n.foto.idFoto,".",n.foto.format,"")}}function m(t,e){if(1&t){var n=d.Tb();d.Sb(0,"ion-item",28),d.Sb(1,"ion-thumbnail",2),d.Ac(2,v,1,1,"img",29),d.Rb(),d.Sb(3,"ion-grid"),d.Sb(4,"ion-row"),d.Sb(5,"ion-col",6),d.Sb(6,"ion-label",30),d.Cc(7),d.Rb(),d.Rb(),d.Rb(),d.Sb(8,"ion-row"),d.Sb(9,"ion-col",6),d.Ac(10,g,2,2,"ion-label",31),d.Rb(),d.Rb(),d.Rb(),d.Sb(11,"ion-icon",32),d.ac("click",(function(){d.tc(n);var t=e.$implicit;return d.ec(2).deletePhoto(t)})),d.Rb(),d.Rb()}if(2&t){var o=e.$implicit;d.Bb(2),d.mc("ngIf",o.foto),d.Bb(5),d.Dc(o.tipoArchivo),d.Bb(3),d.mc("ngIf",o.foto)}}function y(t,e){if(1&t&&(d.Sb(0,"ion-row"),d.Sb(1,"ion-col",6),d.Sb(2,"ion-list"),d.Ac(3,m,12,3,"ion-item",27),d.Rb(),d.Rb(),d.Rb()),2&t){var n=d.ec();d.Bb(3),d.mc("ngForOf",n.listaDocumentos)}}function S(t,e){if(1&t){var n=d.Tb();d.Sb(0,"ion-item",28),d.Sb(1,"ion-thumbnail",2),d.Nb(2,"img",35),d.Rb(),d.Sb(3,"ion-grid"),d.Sb(4,"ion-row"),d.Sb(5,"ion-col",6),d.Sb(6,"ion-label",30),d.Cc(7),d.Rb(),d.Rb(),d.Rb(),d.Sb(8,"ion-row"),d.Sb(9,"ion-col",6),d.Sb(10,"ion-label",34),d.Cc(11),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Sb(12,"ion-icon",32),d.ac("click",(function(){d.tc(n);var t=e.$implicit;return d.ec(2).deleteDocs(t)})),d.Rb(),d.Rb()}if(2&t){var o=e.$implicit;d.Bb(7),d.Dc(o.tipoArchivo),d.Bb(4),d.Dc(o.documento.file.name)}}function w(t,e){if(1&t&&(d.Sb(0,"ion-row"),d.Sb(1,"ion-col",6),d.Sb(2,"ion-list"),d.Ac(3,S,13,2,"ion-item",27),d.Rb(),d.Rb(),d.Rb()),2&t){var n=d.ec();d.Bb(3),d.mc("ngForOf",n.filesAdjuntos)}}function R(t,e){if(1&t&&d.Nb(0,"img",38),2&t){var n=d.ec().$implicit;d.mc("src",n.base64Imagen,d.vc)}}function A(t,e){if(1&t&&(d.Sb(0,"ion-col",6),d.Sb(1,"ion-item",28),d.Sb(2,"div",36),d.Ac(3,R,1,1,"img",37),d.Rb(),d.Rb(),d.Rb()),2&t){var n=e.$implicit;d.Bb(3),d.mc("ngIf",n)}}function C(t,e){if(1&t&&(d.Sb(0,"ion-row"),d.Ac(1,A,4,1,"ion-col",13),d.Rb()),2&t){var n=d.ec();d.Bb(1),d.mc("ngForOf",n.fotosTomadas)}}function P(t,e){1&t&&d.Nb(0,"img",40)}function _(t,e){if(1&t&&(d.Sb(0,"p"),d.Cc(1),d.Rb()),2&t){var n=d.ec().$implicit;d.Bb(1),d.Ec(" ",n.file.name," ")}}function O(t,e){if(1&t&&(d.Sb(0,"ion-col",6),d.Sb(1,"ion-item",28),d.Sb(2,"div",36),d.Ac(3,P,1,0,"img",39),d.Rb(),d.Rb(),d.Sb(4,"ion-item",28),d.Sb(5,"div",36),d.Ac(6,_,2,1,"p",11),d.Rb(),d.Rb(),d.Rb()),2&t){var n=e.$implicit;d.Bb(3),d.mc("ngIf",n.file),d.Bb(3),d.mc("ngIf",n.file)}}function x(t,e){if(1&t&&(d.Sb(0,"ion-select-option",41),d.Cc(1),d.Rb()),2&t){var n=e.$implicit;d.mc("value",n.valor),d.Bb(1),d.Dc(n.nombre)}}var E,M,T,k=[{path:"",component:(E=function(){function t(e,n,o,i,r,c,a){_classCallCheck(this,t),this.file=e,this.alertController=n,this.formBuilder=o,this.router=i,this.storage=r,this.cacheService=c,this.photoService=a,this.ALERT_OPTIONS={header:"Seleccione el tipo de soporte",message:"Los soportes marcados con (*) son obligatorios"},this.fileAttach=[],this.filesAdjuntos=[],this.asistenteEventosPYP=!1,this.evaluacionEventos=!1,this.disableButtons=!0,this.supportTypeTypes=[],this.fotosTomadas=[],this.listaDocumentos=[]}return _createClass(t,[{key:"ionViewWillEnter",value:function(){this.cargarInformaci\u00f3n(),this.lineaAccion=this.cacheService.actionLine}},{key:"ngOnInit",value:function(){this.infoActivity=this.cacheService.infoActivityAtachSelected,this.createFormSupportType(),this.getListaArchivosSoporte()}},{key:"cargarInformaci\xf3n",value:function(){var t=this,e=this.cacheService.obtenerAdjuntosPDF(),n=this.cacheService.obtenerInfoActividadAttachDocs(),o=this.cacheService.obtenerAdjuntosFoto();e.length>0&&(this.filesAdjuntos=[],e.forEach((function(e){e.forEach((function(e){n.id===e.idActividad&&t.filesAdjuntos.push(e)}))}))),o.length>0&&(this.listaDocumentos=[],o.forEach((function(e){e.forEach((function(e){n.id===e.idActividad&&(t.listaDocumentos.push(e),t.fotosTomadas.push(e))}))})))}},{key:"createFormSupportType",value:function(){this.formSupportType=this.formBuilder.group({type:[""]})}},{key:"getListaArchivosSoporte",value:function(){return Object(c.a)(this,void 0,void 0,_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.storage.get("listArchivosSoporte");case 2:this.supportTypeTypes=t.sent;case 3:case"end":return t.stop()}}),t,this)})))}},{key:"changeSupport",value:function(t){this.nameSupport=t.detail.value,"ED"===this.lineaAccion&&("Asistencia a eventos de PyP"===t.detail.value&&(this.asistenteEventosPYP=!0),"Evaluaci\xf3n de eventos"===t.detail.value&&(this.evaluacionEventos=!0))}},{key:"addPhotoToGallery",value:function(){return Object(c.a)(this,void 0,void 0,_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.accionARealizar="foto",this.disableButtons=!0,t.next=4,this.photoService.addNewToGallery();case 4:this.foto=t.sent,this.fotosTomadas.push(this.foto),this.disableButtons=!1;case 7:case"end":return t.stop()}}),t,this)})))}},{key:"abrirExploradorArchivos",value:function(){this.accionARealizar="documento";var t=document.getElementById("file-input");t.value&&(t.value=""),t.click()}},{key:"deletePhoto",value:function(t){for(var e=0;e<this.fotosTomadas.length;e++){var n=this.fotosTomadas[e],o=t.foto;(n.foto?n.foto.idFoto:n.idFoto)===o.idFoto&&(this.fotosTomadas.splice(e,1),this.listaDocumentos.splice(e,1),this.cacheService.removeFotoAdjunta(o.idFoto))}}},{key:"deleteDocs",value:function(t){for(var e=t,n=0;n<this.filesAdjuntos.length;n++)this.filesAdjuntos[n]===e&&(this.filesAdjuntos.splice(n,1),this.fileAttach.splice(n,1),this.cacheService.removePDFAdjunto(e.documento.id))}},{key:"getFileReader",value:function(){var t=new FileReader;return t.__zone_symbol__originalInstance||t}},{key:"loadImageFromDevice",value:function(t){var e=this,n={},o=t.target.files[0];if(o.size/1048576<1){this.disableButtons=!0;var i=this.getFileReader();i.readAsDataURL(t.target.files[0]),i.onload=function(){var t=i.result.toString();e.extensionFile=t.split(",")[0];var n=t.split(",")[1],o=t.split(",")[0].split(";")[0].split(":");e.blob=e.b64toBlob(n,o[1])},setTimeout((function(){n={id:Object(s.v4)(),file:o,blob:e.blob,extension:e.extensionFile,fileAsistenciaEventos:e.asistenteEventosPYP,fileEvaluacionEventos:e.evaluacionEventos},e.archivo=n,e.fileAttach.push(n),e.disableButtons=!1}),3e3)}else this.inputFile.nativeElement.value="",this.notification("Atenci\xf3n","El archivo supera el limite permitido de 1MB")}},{key:"b64toBlob",value:function(t,e){for(var n=atob(t),o=[],i=0;i<n.length;i+=512){for(var r=n.slice(i,i+512),c=new Array(r.length),a=0;a<r.length;a++)c[a]=r.charCodeAt(a);var s=new Uint8Array(c);o.push(s)}return new Blob(o,{type:e})}},{key:"createDirectoryForActivitieSelected",value:function(t,e,n,o){return Object(c.a)(this,void 0,void 0,_regeneratorRuntime().mark((function i(){var r;return _regeneratorRuntime().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,r=t+"-"+(new Date).getTime().toString(16),i.t0=f.b,i.t1="".concat(t,"/").concat(r,".pdf"),i.t2=f.a.Data,i.next=7,this.blobToBase64(e);case 7:return i.t3=i.sent,i.t4=!0,i.t5={path:i.t1,directory:i.t2,data:i.t3,recursive:i.t4},i.next=12,i.t0.writeFile.call(i.t0,i.t5);case 12:this.cacheService.saveAttachDocs({idActividad:t,nombreArchivo:r+".pdf",tipoDocumento:o,extensionBase64:n}),i.next=18;break;case 15:i.prev=15,i.t6=i.catch(0),console.log(i.t6);case 18:case"end":return i.stop()}}),i,this,[[0,15]])})))}},{key:"adjuntar",value:function(){if(this.listaDocumentos.concat(this.filesAdjuntos).length<6){var t=this.validarTipoArchivo(this.formSupportType.get("type").value);if(t){if("foto"===this.accionARealizar){var e={idActividad:this.infoActivity.id,tipoArchivo:t,idTipoArchivo:this.formSupportType.get("type").value,foto:this.foto};return this.listaDocumentos.push(e),void this.formSupportType.get("type").reset()}if("documento"===this.accionARealizar){var n={idActividad:this.infoActivity.id,tipoArchivo:t,idTipoArchivo:this.formSupportType.get("type").value,documento:this.archivo};return this.filesAdjuntos.push(n),this.archivo=void 0,void this.formSupportType.get("type").reset()}}else this.notification("Atenci\xf3n","No puede adjuntar el documento sin seleccionar un tipo de archivo")}else{this.notification("Alerta","No se pueden adjuntar mas de 6 documentos"),this.formSupportType.get("type").reset();var o=document.getElementById("file-input");o.value&&(o.value="")}}},{key:"save",value:function(){var t=this;this.filesAdjuntos.forEach((function(e){t.createDirectoryForActivitieSelected(t.infoActivity.id,e.documento.blob,e.documento.extension,e.idTipoArchivo)}));var e=this.listaDocumentos.concat(this.filesAdjuntos);this.cacheService.infoActividadPorDocumento({idActividad:this.infoActivity.id,cantidadDocumentosAdjuntos:e.length}),this.cacheService.infoFotosAdjuntas(this.listaDocumentos),this.cacheService.infoPDFAdjuntos(this.filesAdjuntos),this.router.navigateByUrl("/u/execLog/pending-visits/visit-id/subjects")}},{key:"validarTipoArchivo",value:function(t){switch(t){case"AEP":return"Asistencia a eventos de P y P";case"EE":return"Evaluaci\xf3n de eventos";case"CRSC":return"Certificaci\xf3n de recibo a satisfacci\xf3n cliente";case"DIUEP1":return"Diagn\xf3stico integral UEP 1";case"DIUEP2":return"Diagn\xf3stico integral UEP 2";case"DIUEP3":return"Diagn\xf3stico integral UEP 3";case"IT":return"Informes T\xe9cnicos";case"REPVE":return"Registro de ex\xe1menes de programa de vigilancia epidemiol\xf3gica";case"SR":return"Seguimiento recomendaciones"}}},{key:"notification",value:function(t,e){return Object(c.a)(this,void 0,void 0,_regeneratorRuntime().mark((function n(){var o;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.alertController.create({header:t,backdropDismiss:!1,mode:"ios",message:e,buttons:["ACEPTAR"]});case 2:return(o=n.sent).onDidDismiss(),n.next=6,o.present();case 6:case"end":return n.stop()}}),n,this)})))}},{key:"blobToBase64",value:function(t){var e=this;return new Promise((function(n,o){var i=e.getFileReader();i.onloadend=function(){return n(i.result.toString())},i.readAsDataURL(t)}))}}]),t}(),E.\u0275fac=function(t){return new(t||E)(d.Mb(a.a),d.Mb(i.a),d.Mb(h.b),d.Mb(r.g),d.Mb(b.b),d.Mb(l.a),d.Mb(u.a))},E.\u0275cmp=d.Gb({type:E,selectors:[["app-uploader"]],viewQuery:function(t,e){var n;1&t&&d.Hc(p,!0),2&t&&d.qc(n=d.bc())&&(e.inputFile=n.first)},decls:79,vars:9,consts:[["size","2"],["color","tertiary"],["slot","start"],["color","primary","mode","md","defaultHref","/"],["size","10"],[1,"titulo"],["size","12"],["lines","none","color","secondary"],["size","12",2,"padding","0px"],[2,"font-size","20px"],[2,"font-size","13px","margin","0px","font-weight","300"],[4,"ngIf"],[2,"padding","0px"],["size","12",4,"ngFor","ngForOf"],["justify-content-around",""],["size","6"],["expand","block","color","primary",3,"click"],["type","file","id","file-input","accept","application/pdf, image/png",2,"display","none",3,"change"],["inputFile",""],["slot","icon-only","name","attach-outline"],["slot","icon-only","name","camera-outline"],[3,"formGroup"],[1,"ion-text-center",2,"width","100%"],["interface","action-sheet","mode","ios","placeholder","Seleccione el tipo de soporte","color","primary","formControlName","type","cancelText","Cancelar",1,"full-width-select","bg-light","mt-3","rounded","pl-1","pr-1",3,"interfaceOptions","ionChange"],["class","custom-options",3,"value",4,"ngFor","ngForOf"],["expand","block",1,"btnAdjuntar",3,"disabled","click"],["expand","block","color","primary",3,"disabled","click"],["lines","none",4,"ngFor","ngForOf"],["lines","none"],["class","imgMenu","alt","iconItem",3,"src",4,"ngIf"],[2,"font-weight","bolder"],["style","font-size: 15px;font-weight: 300;",4,"ngIf"],["slot","end","name","trash",3,"click"],["alt","iconItem",1,"imgMenu",3,"src"],[2,"font-size","15px","font-weight","300"],["src","../../../assets/icon/pdf_icon.svg","alt","iconItem",1,"imgMenu"],[1,"ion-text-center"],["style","width: 30%; height: 30%;",3,"src",4,"ngIf"],[2,"width","30%","height","30%",3,"src"],["style","width: 30%; height: 30%; padding-left: 25px;","src","../../../assets/icon/pdf_icon.svg",4,"ngIf"],["src","../../../assets/icon/pdf_icon.svg",2,"width","30%","height","30%","padding-left","25px"],[1,"custom-options",3,"value"]],template:function(t,e){1&t&&(d.Sb(0,"ion-header"),d.Sb(1,"ion-grid"),d.Sb(2,"ion-row"),d.Sb(3,"ion-col",0),d.Sb(4,"ion-toolbar",1),d.Sb(5,"ion-buttons",2),d.Nb(6,"ion-back-button",3),d.Rb(),d.Rb(),d.Rb(),d.Sb(7,"ion-col",4),d.Sb(8,"ion-title",5),d.Cc(9,"Adjuntar Archivos"),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Sb(10,"ion-content"),d.Sb(11,"ion-grid"),d.Sb(12,"ion-row"),d.Sb(13,"ion-col",6),d.Sb(14,"ion-list"),d.Sb(15,"ion-item",7),d.Sb(16,"div"),d.Sb(17,"ion-grid"),d.Sb(18,"ion-row"),d.Sb(19,"ion-col",8),d.Sb(20,"ion-label",9),d.Cc(21,"Documentos por adjuntar"),d.Rb(),d.Rb(),d.Rb(),d.Sb(22,"ion-row"),d.Sb(23,"ion-col",8),d.Sb(24,"p",10),d.Cc(25,"Muestra los soportes de la actividad"),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Sb(26,"ion-grid"),d.Ac(27,y,4,1,"ion-row",11),d.Ac(28,w,4,1,"ion-row",11),d.Rb(),d.Sb(29,"ion-grid"),d.Sb(30,"ion-row"),d.Sb(31,"ion-col",6),d.Sb(32,"ion-list"),d.Sb(33,"ion-item",7),d.Sb(34,"div"),d.Sb(35,"ion-grid",12),d.Sb(36,"ion-row"),d.Sb(37,"ion-col",8),d.Sb(38,"ion-label",9),d.Cc(39,"Archivos seleccionados"),d.Rb(),d.Rb(),d.Rb(),d.Sb(40,"ion-row"),d.Sb(41,"ion-col",8),d.Sb(42,"p",10),d.Cc(43," Visualiza los archivos seleccionados del dispositivo "),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Sb(44,"ion-row"),d.Sb(45,"ion-grid"),d.Ac(46,C,2,1,"ion-row",11),d.Sb(47,"ion-row"),d.Ac(48,O,7,2,"ion-col",13),d.Rb(),d.Rb(),d.Rb(),d.Sb(49,"ion-row"),d.Sb(50,"ion-toolbar"),d.Sb(51,"ion-grid"),d.Sb(52,"ion-row",14),d.Sb(53,"ion-col",15),d.Sb(54,"ion-button",16),d.ac("click",(function(){return e.abrirExploradorArchivos()})),d.Sb(55,"input",17,18),d.ac("change",(function(t){return e.loadImageFromDevice(t)})),d.Rb(),d.Nb(57,"ion-icon",19),d.Cc(58," PDF "),d.Rb(),d.Rb(),d.Sb(59,"ion-col",15),d.Sb(60,"ion-button",16),d.ac("click",(function(){return e.addPhotoToGallery()})),d.Nb(61,"ion-icon",20),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Sb(62,"form",21),d.Sb(63,"ion-row"),d.Sb(64,"div",22),d.Sb(65,"h3"),d.Cc(66,"Seleccione el tipo de soporte"),d.Rb(),d.Rb(),d.Sb(67,"ion-col"),d.Sb(68,"ion-select",23),d.ac("ionChange",(function(t){return e.changeSupport(t)})),d.Ac(69,x,2,2,"ion-select-option",24),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Sb(70,"ion-grid"),d.Sb(71,"ion-row"),d.Sb(72,"ion-col",6),d.Sb(73,"ion-button",25),d.ac("click",(function(){return e.adjuntar()})),d.Cc(74,"Adjuntar "),d.Rb(),d.Rb(),d.Rb(),d.Sb(75,"ion-row"),d.Sb(76,"ion-col",6),d.Sb(77,"ion-button",26),d.ac("click",(function(){return e.save()})),d.Cc(78,"Guardar"),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb()),2&t&&(d.Bb(27),d.mc("ngIf",e.listaDocumentos.length>0),d.Bb(1),d.mc("ngIf",e.filesAdjuntos.length>0),d.Bb(18),d.mc("ngIf",e.fotosTomadas),d.Bb(2),d.mc("ngForOf",e.fileAttach),d.Bb(14),d.mc("formGroup",e.formSupportType),d.Bb(6),d.mc("interfaceOptions",e.ALERT_OPTIONS),d.Bb(1),d.mc("ngForOf",e.supportTypeTypes),d.Bb(4),d.mc("disabled",e.disableButtons),d.Bb(4),d.mc("disabled",e.disableButtons))},directives:[i.w,i.v,i.L,i.p,i.Y,i.i,i.e,i.f,i.W,i.q,i.G,i.A,i.F,o.l,o.k,i.h,i.x,h.r,h.m,h.f,i.N,i.ib,h.l,h.d,i.V,i.O],styles:[".alert-wrapper{--width:calc(100vw - 40px);--max-width:calc(100vw - 40px)}ion-header[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{color:#fff}ion-header[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:0;background:#95a6b1}ion-header[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius:50px}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{padding:0}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{width:100%;border-radius:15px;font-size:16.4px;font-weight:700;--min-height:70px}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{margin-left:-20px}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   .imgThumbnail[_ngcontent-%COMP%]{padding:12px;height:61px}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius:50px}ion-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{background-color:transparent}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius:50px}.btnAdjuntar[_ngcontent-%COMP%]{--background:#516f7a}.titulo[_ngcontent-%COMP%]{width:100%!important;font-size:25px!important;text-align:left;padding:10px 0 0}"]}),E)}],F=((T=_createClass((function t(){_classCallCheck(this,t)}))).\u0275mod=d.Kb({type:T}),T.\u0275inj=d.Jb({factory:function(t){return new(t||T)},imports:[[r.j.forChild(k)],r.j]}),T),j=((M=_createClass((function t(){_classCallCheck(this,t)}))).\u0275mod=d.Kb({type:M}),M.\u0275inj=d.Jb({factory:function(t){return new(t||M)},providers:[a.a],imports:[[o.c,h.g,h.p,i.Z,F]]}),M)},xDdU:function(t,e,n){var o,i,r=n("4fRq"),c=n("I2ZF"),a=0,s=0;t.exports=function(t,e,n){var u=e&&n||0,l=e||[],f=(t=t||{}).node||o,d=void 0!==t.clockseq?t.clockseq:i;if(null==f||null==d){var h=r();null==f&&(f=o=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==d&&(d=i=16383&(h[6]<<8|h[7]))}var b=void 0!==t.msecs?t.msecs:(new Date).getTime(),p=void 0!==t.nsecs?t.nsecs:s+1,v=b-a+(p-s)/1e4;if(v<0&&void 0===t.clockseq&&(d=d+1&16383),(v<0||b>a)&&void 0===t.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=b,s=p,i=d;var g=(1e4*(268435455&(b+=122192928e5))+p)%4294967296;l[u++]=g>>>24&255,l[u++]=g>>>16&255,l[u++]=g>>>8&255,l[u++]=255&g;var m=b/4294967296*1e4&268435455;l[u++]=m>>>8&255,l[u++]=255&m,l[u++]=m>>>24&15|16,l[u++]=m>>>16&255,l[u++]=d>>>8|128,l[u++]=255&d;for(var y=0;y<6;++y)l[u+y]=f[y];return e||c(l)}},xk4V:function(t,e,n){var o=n("4fRq"),i=n("I2ZF");t.exports=function(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var c=(t=t||{}).random||(t.rng||o)();if(c[6]=15&c[6]|64,c[8]=63&c[8]|128,e)for(var a=0;a<16;++a)e[r+a]=c[a];return e||i(c)}}}]);